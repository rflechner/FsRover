(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;a=window;b=a.FsRover=a.FsRover||{};c=b.Web=b.Web||{};d=c.Client=c.Client||{};e=a.WebSharper;f=e&&e.UI;g=f&&f.Next;h=g&&g.Doc;i=g&&g.AttrProxy;j=e&&e.Remoting;k=j&&j.AjaxRemotingProvider;l=e&&e.Utils;m=e&&e.List;n=g&&g.Var;o=g&&g.Submitter;p=g&&g.View;q=e&&e.Concurrency;d.Drive=function(){var r,s,t,u,v;function w(x,y,z){return h.Element("div",[i.Create("class","row")],[h.Element("div",[i.Create("class","col-xs-6 col-sm-4")],x),h.Element("div",[i.Create("class","col-xs-6 col-sm-4")],y),h.Element("div",[i.Create("class","clearfix visible-xs-block")],[]),h.Element("div",[i.Create("class","col-xs-6 col-sm-4")],z)]);}r=h.Button("Forward",[],function(){(new k.New()).Sync("FsRover.Web:FsRover.Web.Server.MoveForward:-71292294",[]);});s=h.Button("Left",[],function(){(new k.New()).Sync("FsRover.Web:FsRover.Web.Server.MoveBackward:-71292294",[]);});t=h.Button("Right",[],function(){(new k.New()).Sync("FsRover.Web:FsRover.Web.Server.MoveRight:-71292294",[]);});u=h.Button("Backward",[],function(){(new k.New()).Sync("FsRover.Web:FsRover.Web.Server.MoveLeft:-71292294",[]);});v=h.Element("img",[],[]);a.jQuery("html").keydown(function(x){var y,z,A,B,C;{y=x.which,(z=d.IsKey(37,y),z!=null&&z.$==1)?(new k.New()).Sync("FsRover.Web:FsRover.Web.Server.MoveLeft:-71292294",[]):(A=d.IsKey(40,y),A!=null&&A.$==1)?(new k.New()).Sync("FsRover.Web:FsRover.Web.Server.MoveBackward:-71292294",[]):(B=d.IsKey(38,y),B!=null&&B.$==1)?(new k.New()).Sync("FsRover.Web:FsRover.Web.Server.MoveForward:-71292294",[]):(C=d.IsKey(39,y),C!=null&&C.$==1)&&(new k.New()).Sync("FsRover.Web:FsRover.Web.Server.MoveRight:-71292294",[]);return;}});a.setInterval(function(){var x;x=a.location;v.SetAttribute("src",(function(y){return function(z){return y("//"+l.toSafe(z)+"/api/photo/reversed/300/240/jpeg");};}(a.id))(x.host));},150);return h.Element("div",[],[h.Element("h2",[],[h.TextNode("Command panel")]),((function(x){function y(z,A){return w(x,z,A);}return function(z){return function(A){return y(z,A);};};}(m.T.Empty))(m.ofArray([r])))(m.T.Empty),((function(x){function y(z,A){return w(x,z,A);}return function(z){return function(A){return y(z,A);};};}(m.ofArray([s])))(m.ofArray([v])))(m.ofArray([t])),((function(x){function y(z,A){return w(x,z,A);}return function(z){return function(A){return y(z,A);};};}(m.T.Empty))(m.ofArray([u])))(m.T.Empty)]);};d.Main=function(){var r,s,t;r=n.Create$1("");s=o.CreateOption(r.v);t=p.MapAsync(function(u){var v;return u!=null&&u.$==1?(new k.New()).Async("FsRover.Web:FsRover.Web.Server.DoSomething:-1287498065",[u.$0]):(v=null,q.Delay(function(){return q.Return("");}));},s.view);return h.Element("div",[],[h.Input([],r),h.Button("Send",[],function(){s.Trigger();}),h.Element("hr",[],[]),h.Element("h4",[i.Create("class","text-muted")],[h.TextNode("The server responded:")]),h.Element("div",[i.Create("class","jumbotron")],[h.Element("h1",[],[h.TextView(t)])])]);};d.log=function(r){a["eval"]((function(s){return function(t){return s("console.log(\""+l.toSafe(t)+"\");");};}(a.id))(r));};d.IsKey=function(r,s){return r===s?{$:1,$0:null}:null;};}());
