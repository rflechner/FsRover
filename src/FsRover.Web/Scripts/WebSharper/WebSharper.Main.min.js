(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu;a=window;b=a.WebSharper=a.WebSharper||{};c=b.JavaScript=b.JavaScript||{};d=c.JSModule=c.JSModule||{};e=b.Obj=b.Obj||{};f=b.Collections=b.Collections||{};g=f.EqualityComparer=f.EqualityComparer||{};h=b.MacroModule=b.MacroModule||{};i=h.EquatableEqualityComparer=h.EquatableEqualityComparer||{};j=h.BaseEqualityComparer=h.BaseEqualityComparer||{};k=f.Comparer=f.Comparer||{};l=h.ComparableComparer=h.ComparableComparer||{};m=h.BaseComparer=h.BaseComparer||{};n=c.Pervasives=c.Pervasives||{};o=b.Json=b.Json||{};p=b.Remoting=b.Remoting||{};q=p.XhrProvider=p.XhrProvider||{};r=p.AjaxRemotingProvider=p.AjaxRemotingProvider||{};s=a.StartupCode$WebSharper_Main$Remoting=a.StartupCode$WebSharper_Main$Remoting||{};t=b.HtmlContentExtensions=b.HtmlContentExtensions||{};u=t.SingleNode=t.SingleNode||{};v=b.Activator=b.Activator||{};w=b.Operators=b.Operators||{};x=b.Nullable=b.Nullable||{};y=b.Utils=b.Utils||{};z=b.Concurrency=b.Concurrency||{};A=z.CT=z.CT||{};B=z.AsyncBody=z.AsyncBody||{};C=z.Scheduler=z.Scheduler||{};D=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};E=b.Enumerator=b.Enumerator||{};F=E.T=E.T||{};G=c.Optional=c.Optional||{};H=b.Arrays=b.Arrays||{};I=b.Seq=b.Seq||{};J=b.List=b.List||{};K=b.Arrays2D=b.Arrays2D||{};L=b.CancellationTokenSource=b.CancellationTokenSource||{};M=b.Char=b.Char||{};N=b.Util=b.Util||{};O=b.DateUtil=b.DateUtil||{};P=b.DateTimeOffset=b.DateTimeOffset||{};Q=b.Delegate=b.Delegate||{};R=f.DictionaryUtil=f.DictionaryUtil||{};S=f.KeyCollection=f.KeyCollection||{};T=f.ValueCollection=f.ValueCollection||{};U=f.Dictionary=f.Dictionary||{};V=b.MatchFailureException=b.MatchFailureException||{};W=b.IndexOutOfRangeException=b.IndexOutOfRangeException||{};X=b.OperationCanceledException=b.OperationCanceledException||{};Y=b.ArgumentException=b.ArgumentException||{};Z=b.ArgumentOutOfRangeException=b.ArgumentOutOfRangeException||{};_0=b.InvalidOperationException=b.InvalidOperationException||{};_1=b.AggregateException=b.AggregateException||{};_2=b.TimeoutException=b.TimeoutException||{};_3=b.FormatException=b.FormatException||{};_4=b.OverflowException=b.OverflowException||{};_5=b.Guid=b.Guid||{};_6=f.HashSetUtil=f.HashSetUtil||{};_7=f.HashSet=f.HashSet||{};_8=b.LazyExtensionsProxy=b.LazyExtensionsProxy||{};_9=_8.LazyRecord=_8.LazyRecord||{};_=b.Lazy=b.Lazy||{};$=J.T=J.T||{};ba=b.Slice=b.Slice||{};bb=b.Option=b.Option||{};bc=b.Queue=b.Queue||{};bd=b.Random=b.Random||{};be=b.Ref=b.Ref||{};bf=b.Result=b.Result||{};bg=b.Control=b.Control||{};bh=b.Stack=b.Stack||{};bi=b.Strings=b.Strings||{};bj=b.Task=b.Task||{};bk=b.Task1=b.Task1||{};bl=b.TaskCompletionSource=b.TaskCompletionSource||{};bm=b.Unchecked=b.Unchecked||{};bn=b.Numeric=b.Numeric||{};bo=a.IntelliFactory;bp=bo&&bo.Runtime;bq=a.JSON;br=a.String;bs=a.Date;bt=a.console;bu=a.Math;d.GetFieldValues=function(bv){var bw,bx;bw=[];for(var by in bv)bw.push(bv[by]);return bw;};d.GetFieldNames=function(bv){var bw,bx;bw=[];for(var by in bv)bw.push(by);return bw;};d.GetFields=function(bv){var bw,bx;bw=[];for(var by in bv)bw.push([by,bv[by]]);return bw;};e=b.Obj=bp.Class({Equals:function(bv){return this===bv;},GetHashCode:function(){return -1;}},null,e);e.New=bp.Ctor(function(){},e);g=f.EqualityComparer=bp.Class({CGetHashCode0:function(bv){return this.GetHashCode$1(bv);},CEquals0:function(bv,bw){return this.Equals$1(bv,bw);},CGetHashCode:function(bv){return this.GetHashCode$1(bv);},CEquals:function(bv,bw){return this.Equals$1(bv,bw);}},e,g);g.New=bp.Ctor(function(){},g);i=h.EquatableEqualityComparer=bp.Class({GetHashCode$1:function(bv){return bm.Hash(bv);},Equals$1:function(bv,bw){return bv.EEquals(bw);}},g,i);i.New=bp.Ctor(function(){g.New.call(this);},i);j=h.BaseEqualityComparer=bp.Class({GetHashCode$1:function(bv){return bm.Hash(bv);},Equals$1:function(bv,bw){return bm.Equals(bv,bw);}},g,j);j.New=bp.Ctor(function(){g.New.call(this);},j);k=f.Comparer=bp.Class({Compare0:function(bv,bw){return this.Compare$1(bv,bw);},Compare:function(bv,bw){return this.Compare$1(bv,bw);}},e,k);k.New=bp.Ctor(function(){},k);l=h.ComparableComparer=bp.Class({Compare$1:function(bv,bw){return bv.CompareTo(bw);}},k,l);l.New=bp.Ctor(function(){k.New.call(this);},l);m=h.BaseComparer=bp.Class({Compare$1:function(bv,bw){return bm.Compare(bv,bw);}},k,m);m.New=bp.Ctor(function(){k.New.call(this);},m);n.GetJS=function(bv,bw){var bx,by;bx=bv;by=E.Get(bw);try{while(by.MoveNext())bx=bx[by.Current()];}finally{if("Dispose"in by)by.Dispose();}return bx;};n.NewFromSeq=function(bv){var bw,bx,by;bw={};bx=E.Get(bv);try{while(bx.MoveNext()){by=bx.Current();bw[by[0]]=by[1];}}finally{if("Dispose"in bx)bx.Dispose();}return bw;};o.Activate=function(bv){var bx,by,bz;function bw(bA){var bB,bC,bD,bE,bF;if(bm.Equals(bA,null))return bA;else if(typeof bA=="object"){if(bA instanceof a.Array)return o.shallowMap(bw,bA);else{bB=o.shallowMap(bw,bA.$V);bC=bA.$T;if(bm.Equals(typeof bC,"undefined"))return bB;else{bD=H.get(bx,bC);if(bD===window.WebSharper.List.T)return J.ofArray(bB);else{bE=new(H.get(bx,bC))();for(var bG in bB)if(function(bH){bE[bH]=bB[bH];return false;}(bG))break;return bE;}}}}else return bA;}bx=bv.$TYPES;for(by=0,bz=H.length(bx)-1;by<=bz;by++)H.set(bx,by,o.lookup(H.get(bx,by)));return bw(bv.$DATA);};o.shallowMap=function(bv,bw){var bx,by;if(bw instanceof a.Array)return H.map(bv,bw);else if(typeof bw=="object"){bx={};for(var bz in bw)if(function(bA){bx[bA]=bv(bw[bA]);return false;}(bz))break;return bx;}else return bw;};o.lookup=function(bv){var bw,bx,by,bz,bA;by=H.length(bv);bw=window;bx=0;while(bx<by){bz=H.get(bv,bx);bA=bw[bz];!bm.Equals(typeof bA,void 0)?(bw=bA,bx=bx+1):w.FailWith("Invalid server reply. Failed to find type: "+bz);}return bw;};q=p.XhrProvider=bp.Class({Sync:function(bv,bw,bx){var by;by=[null];p.ajax(false,bv,bw,bx,function(bz){by[0]=bz;},function(bz){throw bz;},function(){p.ajax(false,bv,bw,bx,function(bz){by[0]=bz;},function(bz){throw bz;},void 0);});return by[0];},Async:function(bv,bw,bx,by,bz){p.ajax(true,bv,bw,bx,by,bz,function(){p.ajax(true,bv,bw,bx,by,bz,void 0);});}},e,q);q.New=bp.Ctor(function(){},q);r=p.AjaxRemotingProvider=bp.Class({get_EndPoint:function(){return p.EndPoint();},AsyncBase:function(bv,bw){var bx,by;bx=this;by=null;return z.Delay(function(){var bz,bA;bz=p.makeHeaders(bv);bA=p.makePayload(bw);return z.Bind(z.GetCT(),function(bB){return z.FromContinuations(function(bC,bD,bE){var bF,bG,bH;function bI(bJ){return bF[0]?(bF[0]=false,bE(new X.New(bB))):null;}bF=[true];bG=z.Register(bB,function(){bI();});bH=bx.get_EndPoint();return p.AjaxProvider().Async(bH,bz,bA,function(bJ){if(bF[0]){bF[0]=false;bG.Dispose();bC(o.Activate(bq.parse(bJ)));}},function(bJ){if(bF[0]){bF[0]=false;bG.Dispose();bD(bJ);}});});});});},Send:function(bv,bw){z.Start(this.AsyncBase(bv,bw),null);},Task:function(bv,bw){return z.StartAsTask(this.AsyncBase(bv,bw),null);},Async:function(bv,bw){return this.AsyncBase(bv,bw);},Sync:function(bv,bw){var bx,by,bz;return o.Activate(bq.parse((bx=this.get_EndPoint(),(by=p.makeHeaders(bv),(bz=p.makePayload(bw),p.AjaxProvider().Sync(bx,by,bz))))));}},e,r);r.New=bp.Ctor(function(){},r);p.ajax=function(bv,bw,bx,by,bz,bA,bB){var bC,bD,bE;bC=new a.XMLHttpRequest();bD=a.document.cookie.replace(new a.RegExp("(?:(?:^|.*;)\\s*csrftoken\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");bC.open("POST",bw,bv);if(bv==true)bC.withCredentials=true;for(var bG in bx)bC.setRequestHeader(bG,bx[bG]);if(bD)bC.setRequestHeader("x-csrftoken",bD);function bF(){var bH;if(bC.status==200)bz(bC.responseText);else if(bB&&bC.status==403&&bC.responseText=="CSRF")bB();else{bH="Response status is not 200: ";bA(new a.Error(bH+bC.status));}}if("onload"in bC)bC.onload=bC.onerror=bC.onabort=bF;else bC.onreadystatechange=function(){if(bC.readyState==4)bF();};bC.send(by);};p.makePayload=function(bv){return bq.stringify(bv);};p.makeHeaders=function(bv){return{"content-type":"application/json","x-websharper-rpc":bv};};p.AjaxProvider=function(){s.$cctor();return s.AjaxProvider;};p.set_AjaxProvider=function(bv){s.$cctor();s.AjaxProvider=bv;};p.UseHttps=function(){try{return!bi.StartsWith(a.location.href,"https://")&&(p.set_EndPoint(bi.Replace(a.location.href,"http://","https://")),true);}catch(bv){return false;}};p.EndPoint=function(){s.$cctor();return s.EndPoint;};p.set_EndPoint=function(bv){s.$cctor();s.EndPoint=bv;};s.$cctor=function(){s.$cctor=a.ignore;s.EndPoint="?";s.AjaxProvider=new q.New();};u=t.SingleNode=bp.Class({ReplaceInDom:function(bv){this.node.parentNode.replaceChild(this.node,bv);}},e,u);u.New=bp.Ctor(function(bv){this.node=bv;},u);v.hasDocument=function(){return typeof a.document!=="undefined";};v.Activate=function(){var bv;if(v.hasDocument()){bv=a.document.getElementById("websharper-data");bv?a.jQuery(a.document).ready(function(){function bw(bx,by){by.Body().ReplaceInDom(a.document.getElementById(bx));}return H.iter(function(bx){return bw(bx[0],bx[1]);},d.GetFields(o.Activate(bq.parse(bv.getAttribute("content")))));}):void 0;}};w.charRange=function(bv,bw){var bx,by;bx=bv.charCodeAt();by=1+bw.charCodeAt()-bx;return by<=0?[]:I.init(by,function(bz){return br.fromCharCode(bz+bx);});};x.op=function(bv,bw,bx){return bv==null||bw==null?null:bx(bv,bw);};x.opL=function(bv,bw,bx){return bv==null?null:bx(bv,bw);};x.opR=function(bv,bw,bx){return bw==null?null:bx(bv,bw);};x.cmp=function(bv,bw,bx){return bv==null||bw==null?false:bx(bv,bw);};x.cmpE=function(bv,bw,bx){return bv==null?bw==null:bw==null?false:bx(bv,bw);};x.cmpL=function(bv,bw,bx){return bv==null?false:bx(bv,bw);};x.cmpR=function(bv,bw,bx){return bw==null?false:bx(bv,bw);};x.conv=function(bv,bw){return bv==null?null:bw(bv);};y.prettyPrint=function(bv){var bw,bx;function by(bz,bA){return bz+" = "+y.prettyPrint(bA);}return bv===null?"null":(bw=typeof bv,bw=="string"?"\""+bv+"\"":bw=="object"?bv instanceof a.Array?"[|"+bi.concat("; ",H.map(y.prettyPrint,bv))+"|]":(bx=br(bv),bx==="[object Object]"?"{"+bi.concat("; ",H.map(function(bz){return by(bz[0],bz[1]);},d.GetFields(bv)))+"}":bx):br(bv));};y.printArray2D=function(bv,bw){return bw===null?"null":"[["+bi.concat("][",I.delay(function(){var bx;bx=bw.length?bw[0].length:0;return I.map(function(by){return bi.concat("; ",I.delay(function(){return I.map(function(bz){return bv(H.get2D(bw,by,bz));},w.range(0,bx-1));}));},w.range(0,bw.length-1));}))+"]]";};y.printArray=function(bv,bw){return bw===null?"null":"[|"+bi.concat("; ",H.map(bv,bw))+"|]";};y.printList=function(bv,bw){return"["+bi.concat("; ",I.map(bv,bw))+"]";};y.padNumLeft=function(bv,bw){var bx;bx=H.get(bv,0);return bx===" "||bx==="+"||bx==="-"?bx+bi.PadLeftWith(bv.substr(1),bw-1,"0"):bi.PadLeftWith(bv,bw,"0");};y.spaceForPos=function(bv,bw){return 0<=bv?" "+bw:bw;};y.plusForPos=function(bv,bw){return 0<=bv?"+"+bw:bw;};y.toSafe=function(bv){return bv==null?"":bv;};A.New=function(bv,bw){return{c:bv,r:bw};};B.New=function(bv,bw){return{k:bv,ct:bw};};C=z.Scheduler=bp.Class({tick:function(){var bv,bw,bx;bw=this;bx=bs.now();bv=true;while(bv)if(this.robin.length===0){this.idle=true;bv=false;}else{(this.robin.shift())();bs.now()-bx>40?(a.setTimeout(function(){bw.tick();},0),bv=false):void 0;}},Fork:function(bv){var bw;bw=this;this.robin.push(bv);this.idle?(this.idle=false,a.setTimeout(function(){bw.tick();},0)):void 0;}},e,C);C.New=bp.Ctor(function(){this.idle=true;this.robin=[];},C);z.For=function(bv,bw){return z.Using(E.Get(bv),function(bx){return z.While(function(){return bx.MoveNext();},z.Delay(function(){return bw(bx.Current());}));});};z.While=function(bv,bw){return bv()?z.Bind(bw,function(){return z.While(bv,bw);}):z.Return();};z.Using=function(bv,bw){return z.TryFinally(bw(bv),function(){bv.Dispose();});};z.TryCancelled=function(bv,bw){return function(bx){bv(B.New(function(by){if(by.$==2){bw(by.$0);bx.k(by);}else bx.k(by);},bx.ct));};};z.OnCancel=function(bv){return function(bw){bw.k({$:0,$0:z.Register(bw.ct,bv)});};};z.StartChild=function(bv,bw){return function(bx){var by,bz,bA,bB;by=[true];bz=[null];bA=[];bB=bw!=null&&bw.$==1?{$:1,$0:a.setTimeout(function(){var bC;by[0]=false;bC={$:1,$0:new _2.New()};while(bA.length>0)(bA.shift())(bC);},bw.$0)}:null;z.scheduler().Fork(function(){if(!bx.ct.c)bv(B.New(function(bC){if(by[0]){bz[0]={$:1,$0:bC};bB!=null&&bB.$==1?a.clearTimeout(bB.$0):void 0;while(bA.length>0)(bA.shift())(bC);}},bx.ct));});bx.k({$:0,$0:function(bC){var bD;if(by[0]){bD=bz[0];bD==null?bA.push(bC.k):bC.k(bD.$0);}else bC.k({$:1,$0:new _2.New()});}});};};z.Parallel=function(bv){var bw;bw=H.ofSeq(bv);return H.length(bw)===0?z.Return([]):function(bx){var by,bz,bA;function bB(bC,bD){var bE,bF;bF=bz[0];switch(bF===0?0:bF===1?bD.$==0?1:(bE=[bF,bD],3):bD.$==0?2:(bE=[bF,bD],3)){case 0:return null;break;case 1:H.set(bA,bC,bD.$0);bz[0]=0;return bx.k({$:0,$0:bA});break;case 2:H.set(bA,bC,bD.$0);{bz[0]=bF-1;return;}break;case 3:bz[0]=0;return bx.k(bE[1]);break;}}by=bw.length;bz=[by];bA=new a.Array(by);H.iteri(function(bC,bD){return z.scheduler().Fork(function(){bD(B.New(function(bE){return bB(bC,bE);},bx.ct));});},bw);};};z.Sleep=function(bv){return function(bw){var bx,by;bx=void 0;by=void 0;bx=a.setTimeout(function(){by.Dispose();z.scheduler().Fork(function(){bw.k({$:0,$0:null});});},bv);by=z.Register(bw.ct,function(){a.clearTimeout(bx);z.scheduler().Fork(function(){z.cancel(bw);});});};};z.StartAsTask=function(bv,bw){var bx;bx=new bl.New();z.StartWithContinuations(bv,function(by){bx.SetResult(by);},function(by){bx.SetException$1(by);},function(){bx.SetCanceled();},bw);return bx.get_Task();};z.AwaitTask1=function(bv){return z.FromContinuations(function(bw,bx,by){bm.Equals(bv.get_Status(),0)?bv.Start():void 0;{bv.ContinueWith$2(function(bz){return bz.get_IsCanceled()?by(new X.New(z.noneCT())):bz.get_IsFaulted()?bx(bz.get_Exception()):bw(bz.get_Result());});return;}});};z.AwaitTask=function(bv){return z.FromContinuations(function(bw,bx,by){bm.Equals(bv.get_Status(),0)?bv.Start():void 0;{bv.ContinueWith$2(function(bz){return bz.get_IsCanceled()?by(new X.New(z.noneCT())):bz.get_IsFaulted()?bx(bz.get_Exception()):bw();});return;}});};z.AwaitEvent=function(bv,bw){return function(bx){var by,bz;by=void 0;bz=void 0;by=bv.Subscribe(N.observer(function(bA){by.Dispose();bz.Dispose();z.scheduler().Fork(function(){bx.k({$:0,$0:bA});});}));bz=z.Register(bx.ct,function(){if(bw!=null&&bw.$==1)bw.$0();else{by.Dispose();z.scheduler().Fork(function(){z.cancel(bx);});}});};};z.StartImmediate=function(bv,bw){var bx,by;bx=(by=(z.defCTS())[0],bw==null?by:bw.$0);!bx.c?bv(B.New(function(bz){if(bz.$==1)z.UncaughtAsyncError(bz.$0);},bx)):void 0;};z.Start=function(bv,bw){var bx,by;bx=(by=(z.defCTS())[0],bw==null?by:bw.$0);z.scheduler().Fork(function(){if(!bx.c)bv(B.New(function(bz){if(bz.$==1)z.UncaughtAsyncError(bz.$0);},bx));});};z.UncaughtAsyncError=function(bv){bt.log("WebSharper: Uncaught asynchronous exception",bv);};z.StartWithContinuations=function(bv,bw,bx,by,bz){var bA,bB;bA=(bB=(z.defCTS())[0],bz==null?bB:bz.$0);!bA.c?bv(B.New(function(bC){if(bC.$==1)bx(bC.$0);else if(bC.$==2)by(bC.$0);else bw(bC.$0);},bA)):void 0;};z.FromContinuations=function(bv){return function(bw){var bx;function by(bz){if(bx[0])w.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bx[0]=true;z.scheduler().Fork(bz);}}bx=[false];bv(function(bz){by(function(){bw.k({$:0,$0:bz});});},function(bz){by(function(){bw.k({$:1,$0:bz});});},function(bz){by(function(){bw.k({$:2,$0:bz});});});};};z.GetCT=function(){D.$cctor();return D.GetCT;};z.Catch=function(bv){return function(bw){try{bv(B.New(function(bx){if(bx.$==0)bw.k({$:0,$0:{$:0,$0:bx.$0}});else if(bx.$==1)bw.k({$:0,$0:{$:1,$0:bx.$0}});else bw.k(bx);},bw.ct));}catch(bx){bw.k({$:0,$0:{$:1,$0:bx}});}};};z.TryWith=function(bv,bw){return function(bx){bv(B.New(function(by){if(by.$==0)bx.k({$:0,$0:by.$0});else if(by.$==1)try{(bw(by.$0))(bx);}catch(bz){bx.k(by);}else bx.k(by);},bx.ct));};};z.TryFinally=function(bv,bw){return function(bx){bv(B.New(function(by){try{bw();bx.k(by);}catch(bz){bx.k({$:1,$0:bz});}},bx.ct));};};z.Delay=function(bv){return function(bw){try{(bv(null))(bw);}catch(bx){bw.k({$:1,$0:bx});}};};z.Combine=function(bv,bw){return z.Bind(bv,function(){return bw;});};z.Bind=function(bv,bw){return z.checkCancel(function(bx){bv(B.New(function(by){var bz;if(by.$==0){bz=by.$0;z.scheduler().Fork(function(){try{(bw(bz))(bx);}catch(bA){bx.k({$:1,$0:bA});}});}else z.scheduler().Fork(function(){bx.k(by);});},bx.ct));});};z.Zero=function(){D.$cctor();return D.Zero;};z.Return=function(bv){return function(bw){bw.k({$:0,$0:bv});};};z.checkCancel=function(bv){return function(bw){if(bw.ct.c)z.cancel(bw);else bv(bw);};};z.cancel=function(bv){bv.k({$:2,$0:new X.New(bv.ct)});};z.defCTS=function(){D.$cctor();return D.defCTS;};z.scheduler=function(){D.$cctor();return D.scheduler;};z.Register=function(bv,bw){var bx;return bv===z.noneCT()?{Dispose:function(){return null;}}:(bx=bv.r.push(bw)-1,{Dispose:function(){return H.set(bv.r,bx,a.ignore);}});};z.noneCT=function(){D.$cctor();return D.noneCT;};D.$cctor=function(){D.$cctor=a.ignore;D.noneCT=A.New(false,[]);D.scheduler=new C.New();D.defCTS=[new L.New()];D.Zero=z.Return();D.GetCT=function(bv){bv.k({$:0,$0:bv.ct});};};F=E.T=bp.Class({Dispose:function(){if(this.d)this.d(this);},Current:function(){return this.c;},Current0:function(){return this.c;},MoveNext:function(){return this.n(this);}},e,F);F.New=bp.Ctor(function(bv,bw,bx,by){this.s=bv;this.c=bw;this.n=bx;this.d=by;},F);E.Get0=function(bv){return bv instanceof a.Array?E.ArrayEnumerator(bv):bm.Equals(typeof bv,"string")?E.StringEnumerator(bv):"GetEnumerator0"in bv?bv.GetEnumerator0():bv.GetEnumerator();};E.Get=function(bv){return bv instanceof a.Array?E.ArrayEnumerator(bv):bm.Equals(typeof bv,"string")?E.StringEnumerator(bv):bv.GetEnumerator();};E.StringEnumerator=function(bv){return new F.New(0,null,function(bw){var bx;bx=bw.s;return bx<bv.length&&(bw.c=bv[bx],bw.s=bx+1,true);},void 0);};E.ArrayEnumerator=function(bv){return new F.New(0,null,function(bw){var bx;bx=bw.s;return bx<H.length(bv)&&(bw.c=H.get(bv,bx),bw.s=bx+1,true);},void 0);};G.Undefined={$:0};H.splitInto=function(bv,bw){var bx,by,bz,bA,bB,bC,bD,bE,bF;if(bv<=0)w.FailWith("Count must be positive");by=H.length(bw);if(by===0)return[];else{bz=bm.Compare(bv,by)===-1?bv:by;bA=H.create(bz,null);bB=by/bz>>0;bx=0;for(bC=0,bD=by%bz-1;bC<=bD;bC++){bA[bC]=H.sub(bw,bx,bB+1);bx=bx+bB+1;}for(bE=by%bz,bF=bz-1;bE<=bF;bE++){bA[bE]=H.sub(bw,bx,bB);bx=bx+bB;}return bA;}};H.contains=function(bv,bw){var bx,by,bz,bA;bx=true;by=0;bA=H.length(bw);while(bx&&by<bA)if(bm.Equals(bw[by],bv))bx=false;else by=by+1;return!bx;};H.tryFindBack=function(bv,bw){var bx,by,bz;bx=null;by=bw.length-1;while(by>=0&&bx==null){bz=bw[by];bv(bz)?bx={$:1,$0:bz}:void 0;by=by-1;}return bx;};H.tryFindIndexBack=function(bv,bw){var bx,by;bx=null;by=bw.length-1;while(by>=0&&bx==null){bv(H.get(bw,by))?bx={$:1,$0:by}:void 0;by=by-1;}return bx;};H.mapFold=function(bv,bw,bx){var by,bz,bA,bB,bC;bz=new a.Array(bx.length);by=bw;for(bA=0,bB=bx.length-1;bA<=bB;bA++){bC=bv(by,bx[bA]);bz[bA]=bC[0];by=bC[1];}return[bz,by];};H.mapFoldBack=function(bv,bw,bx){var by,bz,bA,bB,bC,bD,bE,bF;bA=new a.Array(bw.length);by=bx;bB=bw.length;for(bC=1,bD=bB;bC<=bD;bC++){bE=bB-bC;bF=bv(bw[bE],by);bA[bE]=bF[0];by=bF[1];}return[bA,by];};H.mapInPlace=function(bv,bw){var bx,by;for(bx=0,by=bw.length-1;bx<=by;bx++)bw[bx]=bv(bw[bx]);};H.mapiInPlace=function(bv,bw){var bx,by;for(bx=0,by=bw.length-1;bx<=by;bx++)bw[bx]=bv(bx,bw[bx]);return bw;};H.sortInPlaceByDescending=function(bv,bw){H.mapInPlace(function(bx){return bx[0];},H.mapiInPlace(function(bx,by){return[by,[bv(by),bx]];},bw).sort(function(bx,by){return-bm.Compare(bx[1],by[1]);}));};I.tryHead=function(bv){var bw;bw=E.Get(bv);try{return bw.MoveNext()?{$:1,$0:bw.Current()}:null;}finally{if("Dispose"in bw)bw.Dispose();}};I.tryItem=function(bv,bw){var bx,by,bz;if(bv<0)return null;else{bx=0;by=E.Get(bw);try{bz=true;while(bz&&bx<=bv)if(by.MoveNext())bx=bx+1;else bz=false;return bz?{$:1,$0:by.Current()}:null;}finally{if("Dispose"in by)by.Dispose();}}};I.tryLast=function(bv){var bw,bx;bw=E.Get(bv);try{if(bw.MoveNext()){while(bw.MoveNext());bx={$:1,$0:bw.Current()};}else bx=null;return bx;}finally{if("Dispose"in bw)bw.Dispose();}};I.chunkBySize=function(bv,bw){bv<=0?w.FailWith("Chunk size must be positive"):void 0;return{GetEnumerator:function(){var bx;bx=E.Get(bw);return new F.New(null,null,function(by){var bz;if(bx.MoveNext()){bz=[bx.Current()];while(H.length(bz)<bv&&bx.MoveNext())bz.push(bx.Current());by.c=bz;return true;}else return false;},function(){bx.Dispose();});}};};H.countBy=function(bv,bw){var bx,by,bz,bA,bB;bx=new U.New$5();by=[];for(bz=0,bA=H.length(bw)-1;bz<=bA;bz++){bB=bv(bw[bz]);bx.ContainsKey(bB)?bx.set_Item(bB,bx.get_Item(bB)+1):(by.push(bB),bx.Add(bB,1));}H.mapInPlace(function(bC){return[bC,bx.get_Item(bC)];},by);return by;};I.except=function(bv,bw){return{GetEnumerator:function(){var bx,by;bx=E.Get(bw);by=new _7.New$2(bv);return new F.New(null,null,function(bz){var bA,bB;if(bx.MoveNext()){bA=bx.Current();bB=by.Add(bA);while(!bB&&bx.MoveNext()){bA=bx.Current();bB=by.Add(bA);}return bB&&(bz.c=bA,true);}else return false;},function(){bx.Dispose();});}};};J.skip=function(bv,bw){var bx,by,bz;bx=bw;for(by=1,bz=bv;by<=bz;by++)if(bx.$==0)w.FailWith("Input list too short.");else bx=bx.$1;return bx;};H.groupBy=function(bv,bw){var bx,by,bz,bA,bB,bC;bx=new U.New$5();by=[];for(bz=0,bA=H.length(bw)-1;bz<=bA;bz++){bB=bw[bz];bC=bv(bB);bx.ContainsKey(bC)?bx.get_Item(bC).push(bB):(by.push(bC),bx.Add(bC,[bB]));}H.mapInPlace(function(bD){return[bD,bx.get_Item(bD)];},by);return by;};I.insufficient=function(){return w.FailWith("The input sequence has an insufficient number of elements.");};I.last=function(bv){var bw,bx;bw=E.Get(bv);try{if(!bw.MoveNext())bx=I.insufficient();else{while(bw.MoveNext());bx=bw.Current();}return bx;}finally{if("Dispose"in bw)bw.Dispose();}};I.contains=function(bv,bw){var bx,by;bx=E.Get(bw);try{by=false;while(!by&&bx.MoveNext())by=bm.Equals(bx.Current(),bv);return by;}finally{if("Dispose"in bx)bx.Dispose();}};J.skipWhile=function(bv,bw){var bx;bx=bw;while(!(bx.$==0)&&bv(J.head(bx)))bx=J.tail(bx);return bx;};I.nonNegative=function(){return w.FailWith("The input must be non-negative.");};H.checkBounds=function(bv,bw){if(bw<0||bw>=bv.length)w.FailWith("Index was outside the bounds of the array.");};H.checkBounds2D=function(bv,bw,bx){if(bw<0||bx<0||bw>=bv.length||bx>=(bv.length?bv[0].length:0))throw new W.New();};H.checkRange=function(bv,bw,bx){if(bx<0||bw<0||bv.length<bw+bx)w.FailWith("Index was outside the bounds of the array.");};H.set=function(bv,bw,bx){H.checkBounds(bv,bw);bv[bw]=bx;};H.get=function(bv,bw){H.checkBounds(bv,bw);return bv[bw];};H.sub=function(bv,bw,bx){H.checkRange(bv,bw,bx);return bv.slice(bw,bw+bx);};H.setSub=function(bv,bw,bx,by){var bz,bA;for(bz=0,bA=bx-1;bz<=bA;bz++)H.set(bv,bw+bz,H.get(by,bz));};H.get2D=function(bv,bw,bx){H.checkBounds2D(bv,bw,bx);return bv[bw][bx];};H.set2D=function(bv,bw,bx,by){H.checkBounds2D(bv,bw,bx);bv[bw][bx]=by;};H.zeroCreate2D=function(bv,bw){var bx;bx=H.init(bv,function(){return H.create(bw,null);});bx.dims=2;return bx;};H.sub2D=function(bv,bw,bx,by,bz){var bA,bB,bC,bD,bE,bF,bG;bA=by<0?0:by;bB=bz<0?0:bz;bC=H.zeroCreate2D(bA,bB);for(bD=0,bE=bA-1;bD<=bE;bD++){for(bF=0,bG=bB-1;bF<=bG;bF++)H.set2D(bC,bD,bF,H.get2D(bv,bw+bD,bx+bF));}return bC;};H.setSub2D=function(bv,bw,bx,by,bz,bA){var bB,bC,bD,bE;for(bB=0,bC=by-1;bB<=bC;bB++){for(bD=0,bE=bz-1;bD<=bE;bD++)H.set2D(bv,bw+bB,bx+bD,H.get2D(bA,bB,bD));}};H.length=function(bv){return bv.dims===2?bv.length*bv.length:bv.length;};b.checkThis=function(bv){return bm.Equals(bv,null)?w.InvalidOp("The initialization of an object or value resulted in an object or value being accessed recursively before it was fully initialized."):bv;};H.reverse=function(bv,bw,bx){var by;by=H.sub(bv,bw,bx).slice().reverse();H.blit(by,0,bv,bw,H.length(by));};H.sum=function(bv){var bw,bx;bw=0;bx=0;for(;bx<bv.length;bx++)bw+=bv[bx];return bw;};H.sumBy=function(bv,bw){var bx,by;bx=0;by=0;for(;by<bw.length;by++)bx+=bv(bw[by]);return bx;};H.allPairs=function(bv,bw){var bx,by,bz,bA,bB,bC,bD;bx=bv.length;by=bw.length;bz=new a.Array(bx*by);for(bA=0,bB=bx-1;bA<=bB;bA++){for(bC=0,bD=by-1;bC<=bD;bC++)bz[bA*by+bC]=[bv[bA],bw[bC]];}return bz;};H.average=function(bv){return a.Number(H.sum(bv))/bv.length;};H.averageBy=function(bv,bw){return a.Number(H.sumBy(bv,bw))/bw.length;};H.blit=function(bv,bw,bx,by,bz){var bA,bB;H.checkRange(bv,bw,bz);H.checkRange(bx,by,bz);for(bA=0,bB=bz-1;bA<=bB;bA++)bx[by+bA]=bv[bw+bA];};H.choose=function(bv,bw){var bx,by,bz,bA;bx=[];for(by=0,bz=bw.length-1;by<=bz;by++){bA=bv(bw[by]);bA==null?void 0:bx.push(bA.$0);}return bx;};H.collect=function(bv,bw){return a.Array.prototype.concat.apply([],H.map(bv,bw));};H.concat=function(bv){return a.Array.prototype.concat.apply([],H.ofSeq(bv));};H.create=function(bv,bw){var bx,by,bz;bx=new a.Array(bv);for(by=0,bz=bv-1;by<=bz;by++)bx[by]=bw;return bx;};H.exists=function(bv,bw){var bx,by,bz,bA;bx=false;by=0;bA=H.length(bw);while(!bx&&by<bA)if(bv(bw[by]))bx=true;else by=by+1;return bx;};H.exists2=function(bv,bw,bx){var by,bz,bA,bB;H.checkLength(bw,bx);by=false;bz=0;bB=H.length(bw);while(!by&&bz<bB)if(bv(bw[bz],bx[bz]))by=true;else bz=bz+1;return by;};H.fill=function(bv,bw,bx,by){var bz,bA;H.checkRange(bv,bw,bx);for(bz=bw,bA=bw+bx-1;bz<=bA;bz++)bv[bz]=by;};H.filter=function(bv,bw){var bx,by,bz;bx=[];for(by=0,bz=bw.length-1;by<=bz;by++)if(bv(bw[by]))bx.push(bw[by]);return bx;};H.find=function(bv,bw){var bx;bx=H.tryFind(bv,bw);return bx==null?w.FailWith("KeyNotFoundException"):bx.$0;};H.findIndex=function(bv,bw){var bx;bx=H.tryFindIndex(bv,bw);return bx==null?w.FailWith("KeyNotFoundException"):bx.$0;};H.fold=function(bv,bw,bx){var by,bz,bA;by=bw;for(bz=0,bA=bx.length-1;bz<=bA;bz++)by=bv(by,bx[bz]);return by;};H.fold2=function(bv,bw,bx,by){var bz,bA,bB;H.checkLength(bx,by);bz=bw;for(bA=0,bB=bx.length-1;bA<=bB;bA++)bz=bv(bz,bx[bA],by[bA]);return bz;};H.foldBack=function(bv,bw,bx){var by,bz,bA,bB,bC;by=bx;bA=bw.length;for(bB=1,bC=bA;bB<=bC;bB++)by=bv(bw[bA-bB],by);return by;};H.foldBack2=function(bv,bw,bx,by){var bz,bA,bB,bC,bD;H.checkLength(bw,bx);bB=bw.length;bA=by;for(bC=1,bD=bB;bC<=bD;bC++)bA=bv(bw[bB-bC],bx[bB-bC],bA);return bA;};H.forall=function(bv,bw){var bx,by,bz,bA;bx=true;by=0;bA=H.length(bw);while(bx&&by<bA)if(bv(bw[by]))by=by+1;else bx=false;return bx;};H.forall2=function(bv,bw,bx){var by,bz,bA,bB;H.checkLength(bw,bx);by=true;bz=0;bB=H.length(bw);while(by&&bz<bB)if(bv(bw[bz],bx[bz]))bz=bz+1;else by=false;return by;};H.init=function(bv,bw){var bx,by,bz;bv<0?w.FailWith("Negative size given."):null;bx=new a.Array(bv);for(by=0,bz=bv-1;by<=bz;by++)bx[by]=bw(by);return bx;};H.iter=function(bv,bw){var bx,by;for(bx=0,by=bw.length-1;bx<=by;bx++)bv(bw[bx]);};H.iter2=function(bv,bw,bx){var by,bz;H.checkLength(bw,bx);for(by=0,bz=bw.length-1;by<=bz;by++)bv(bw[by],bx[by]);};H.iteri=function(bv,bw){var bx,by;for(bx=0,by=bw.length-1;bx<=by;bx++)bv(bx,bw[bx]);};H.iteri2=function(bv,bw,bx){var by,bz;H.checkLength(bw,bx);for(by=0,bz=bw.length-1;by<=bz;by++)bv(by,bw[by],bx[by]);};H.map=function(bv,bw){var bx,by,bz;bx=new a.Array(bw.length);for(by=0,bz=bw.length-1;by<=bz;by++)bx[by]=bv(bw[by]);return bx;};H.map2=function(bv,bw,bx){var by,bz,bA;H.checkLength(bw,bx);by=new a.Array(bx.length);for(bz=0,bA=bx.length-1;bz<=bA;bz++)by[bz]=bv(bw[bz],bx[bz]);return by;};H.mapi=function(bv,bw){var bx,by,bz;bx=new a.Array(bw.length);for(by=0,bz=bw.length-1;by<=bz;by++)bx[by]=bv(by,bw[by]);return bx;};H.mapi2=function(bv,bw,bx){var by,bz,bA;H.checkLength(bw,bx);by=new a.Array(bw.length);for(bz=0,bA=bw.length-1;bz<=bA;bz++)by[bz]=bv(bz,bw[bz],bx[bz]);return by;};H.max=function(bv){return H.reduce(function(bw,bx){return bm.Compare(bw,bx)===1?bw:bx;},bv);};H.maxBy=function(bv,bw){return H.reduce(function(bx,by){return bm.Compare(bv(bx),bv(by))===1?bx:by;},bw);};H.min=function(bv){return H.reduce(function(bw,bx){return bm.Compare(bw,bx)===-1?bw:bx;},bv);};H.minBy=function(bv,bw){return H.reduce(function(bx,by){return bm.Compare(bv(bx),bv(by))===-1?bx:by;},bw);};H.ofList=function(bv){var bw,bx;bx=[];bw=bv;while(!(bw.$==0)){bx.push(J.head(bw));bw=J.tail(bw);}return bx;};H.ofSeq=function(bv){var bw,bx;if(bv instanceof a.Array)return bv.slice();else if(bv instanceof $)return H.ofList(bv);else{bw=[];bx=E.Get(bv);try{while(bx.MoveNext())bw.push(bx.Current());return bw;}finally{if("Dispose"in bx)bx.Dispose();}}};H.partition=function(bv,bw){var bx,by,bz,bA;bx=[];by=[];for(bz=0,bA=bw.length-1;bz<=bA;bz++)if(bv(bw[bz]))bx.push(bw[bz]);else by.push(bw[bz]);return[bx,by];};H.permute=function(bv,bw){var bx,by,bz;bx=new a.Array(bw.length);for(by=0,bz=bw.length-1;by<=bz;by++)bx[bv(by)]=bw[by];return bx;};H.pick=function(bv,bw){var bx;bx=H.tryPick(bv,bw);return bx==null?w.FailWith("KeyNotFoundException"):bx.$0;};H.reduce=function(bv,bw){var bx,by,bz;H.nonEmpty(bw);bx=bw[0];for(by=1,bz=bw.length-1;by<=bz;by++)bx=bv(bx,bw[by]);return bx;};H.reduceBack=function(bv,bw){var bx,by,bz,bA,bB;H.nonEmpty(bw);bz=bw.length;by=bw[bz-1];for(bA=2,bB=bz;bA<=bB;bA++)by=bv(bw[bz-bA],by);return by;};H.scan=function(bv,bw,bx){var by,bz,bA;by=new a.Array(1+bx.length);by[0]=bw;for(bz=0,bA=bx.length-1;bz<=bA;bz++)by[bz+1]=bv(by[bz],bx[bz]);return by;};H.scanBack=function(bv,bw,bx){var by,bz,bA,bB;by=bw.length;bz=new a.Array(1+by);bz[by]=bx;for(bA=0,bB=by-1;bA<=bB;bA++)bz[by-bA-1]=bv(bw[by-bA-1],bz[by-bA]);return bz;};H.sort=function(bv){return H.map(function(bw){return bw[0];},H.mapi(function(bw,bx){return[bx,bw];},bv).sort(bm.Compare));};H.sortBy=function(bv,bw){return H.map(function(bx){return bx[0];},H.mapi(function(bx,by){return[by,[bv(by),bx]];},bw).sort(function(bx,by){return bm.Compare(bx[1],by[1]);}));};H.sortInPlace=function(bv){H.mapInPlace(function(bw){return bw[0];},H.mapiInPlace(function(bw,bx){return[bx,bw];},bv).sort(bm.Compare));};H.sortInPlaceBy=function(bv,bw){H.mapInPlace(function(bx){return bx[0];},H.mapiInPlace(function(bx,by){return[by,[bv(by),bx]];},bw).sort(function(bx,by){return bm.Compare(bx[1],by[1]);}));};H.sortInPlaceWith=function(bv,bw){bw.sort(bv);};H.sortWith=function(bv,bw){return bw.slice().sort(bv);};H.sortByDescending=function(bv,bw){return H.map(function(bx){return bx[0];},H.mapi(function(bx,by){return[by,[bv(by),bx]];},bw).sort(function(bx,by){return-bm.Compare(bx[1],by[1]);}));};H.sortDescending=function(bv){return H.map(function(bw){return bw[0];},H.mapi(function(bw,bx){return[bx,bw];},bv).sort(function(bw,bx){return-bm.Compare(bw,bx);}));};H.tryFind=function(bv,bw){var bx,by;bx=null;by=0;while(by<bw.length&&bx==null){bv(bw[by])?bx={$:1,$0:bw[by]}:void 0;by=by+1;}return bx;};H.tryFindIndex=function(bv,bw){var bx,by;bx=null;by=0;while(by<bw.length&&bx==null){bv(bw[by])?bx={$:1,$0:by}:void 0;by=by+1;}return bx;};H.tryHead=function(bv){return bv.length===0?null:{$:1,$0:bv[0]};};H.tryItem=function(bv,bw){return bw.length<=bv||bv<0?null:{$:1,$0:bw[bv]};};H.tryLast=function(bv){var bw;bw=bv.length;return bw===0?null:{$:1,$0:bv[bw-1]};};H.tryPick=function(bv,bw){var bx,by,bz;bx=null;by=0;while(by<bw.length&&bx==null){bz=bv(bw[by]);bz!=null&&bz.$==1?bx=bz:void 0;by=by+1;}return bx;};H.unzip=function(bv){var bw,bx,by,bz,bA;bw=[];bx=[];for(by=0,bz=bv.length-1;by<=bz;by++){bA=bv[by];bw.push(bA[0]);bx.push(bA[1]);}return[bw,bx];};H.unzip3=function(bv){var bw,bx,by,bz,bA,bB;bw=[];bx=[];by=[];for(bz=0,bA=bv.length-1;bz<=bA;bz++){bB=bv[bz];bw.push(bB[0]);bx.push(bB[1]);by.push(bB[2]);}return[bw,bx,by];};H.zip=function(bv,bw){var bx,by,bz;H.checkLength(bv,bw);bx=H.create(bv.length,null);for(by=0,bz=bv.length-1;by<=bz;by++)bx[by]=[bv[by],bw[by]];return bx;};H.zip3=function(bv,bw,bx){var by,bz,bA;H.checkLength(bv,bw);H.checkLength(bw,bx);by=H.create(bv.length,null);for(bz=0,bA=bv.length-1;bz<=bA;bz++)by[bz]=[bv[bz],bw[bz],bx[bz]];return by;};H.chunkBySize=function(bv,bw){return H.ofSeq(I.chunkBySize(bv,bw));};H.compareWith=function(bv,bw,bx){return I.compareWith(bv,bw,bx);};H.distinct=function(bv){return H.ofSeq(I.distinct(bv));};H.distinctBy=function(bv,bw){return H.ofSeq(I.distinctBy(bv,bw));};H.except=function(bv,bw){return H.ofSeq(I.except(bv,bw));};H.findBack=function(bv,bw){var bx;bx=H.tryFindBack(bv,bw);return bx==null?w.FailWith("KeyNotFoundException"):bx.$0;};H.findIndexBack=function(bv,bw){var bx;bx=H.tryFindIndexBack(bv,bw);return bx==null?w.FailWith("KeyNotFoundException"):bx.$0;};H.head=function(bv){H.nonEmpty(bv);return bv[0];};H.last=function(bv){H.nonEmpty(bv);return bv[bv.length-1];};H.map3=function(bv,bw,bx,by){var bz,bA,bB;H.checkLength(bw,bx);H.checkLength(bw,by);bz=new a.Array(by.length);for(bA=0,bB=by.length-1;bA<=bB;bA++)bz[bA]=bv(bw[bA],bx[bA],by[bA]);return bz;};H.pairwise=function(bv){return H.ofSeq(I.pairwise(bv));};H.replicate=function(bv,bw){return H.create(bv,bw);};H.indexed=function(bv){return H.mapi(function(bw,bx){return[bw,bx];},bv);};H.skip=function(bv,bw){return bv<0?I.nonNegative():bv>bw.length?I.insufficient():bw.slice(bv);};H.skipWhile=function(bv,bw){var bx,by;by=bw.length;bx=0;while(bx<by&&bv(bw[bx]))bx=bx+1;return bw.slice(bx);};H.tail=function(bv){return H.skip(1,bv);};H.take=function(bv,bw){return bv<0?I.nonNegative():bv>bw.length?I.insufficient():bw.slice(0,bv);};H.takeWhile=function(bv,bw){var bx,by;by=bw.length;bx=0;while(bx<by&&bv(bw[bx]))bx=bx+1;return bw.slice(0,bx);};H.exactlyOne=function(bv){return bv.length===1?bv[0]:w.FailWith("The input does not have precisely one element.");};H.unfold=function(bv,bw){return H.ofSeq(I.unfold(bv,bw));};H.windowed=function(bv,bw){return H.ofSeq(I.windowed(bv,bw));};H.splitAt=function(bv,bw){return[H.take(bv,bw),H.skip(bv,bw)];};H.nonEmpty=function(bv){if(bv.length===0)w.FailWith("The input array was empty.");};H.checkLength=function(bv,bw){if(bv.length!==bw.length)w.FailWith("The arrays have different lengths.");};K.init=function(bv,bw,bx){var by,bz,bA,bB,bC;by=H.zeroCreate2D(bv,bw);for(bz=0,bA=bv-1;bz<=bA;bz++){for(bB=0,bC=bw-1;bB<=bC;bB++)H.set2D(by,bz,bB,bx(bz,bB));}return by;};K.iter=function(bv,bw){var bx,by,bz,bA,bB,bC;bx=bw.length;by=bw.length?bw[0].length:0;for(bz=0,bA=bx-1;bz<=bA;bz++){for(bB=0,bC=by-1;bB<=bC;bB++)bv(H.get2D(bw,bz,bB));}};K.iteri=function(bv,bw){var bx,by,bz,bA,bB,bC;bx=bw.length;by=bw.length?bw[0].length:0;for(bz=0,bA=bx-1;bz<=bA;bz++){for(bB=0,bC=by-1;bB<=bC;bB++)bv(bz,bB,H.get2D(bw,bz,bB));}};K.map=function(bv,bw){return K.init(bw.length,bw.length?bw[0].length:0,function(bx,by){return bv(H.get2D(bw,bx,by));});};K.mapi=function(bv,bw){return K.init(bw.length,bw.length?bw[0].length:0,function(bx,by){return bv(bx,by,H.get2D(bw,bx,by));});};K.copy=function(bv){return K.init(bv.length,bv.length?bv[0].length:0,function(bw,bx){return H.get2D(bv,bw,bx);});};L=b.CancellationTokenSource=bp.Class({CancelAfter:function(bv){var bw,bx;bw=this;!this.c?(bx=this.pending,bx==null?void 0:a.clearTimeout(bx.$0),this.pending={$:1,$0:a.setTimeout(function(){bw.Cancel$1();},bv)}):void 0;},Cancel:function(bv){if(!bv)this.Cancel$1();else if(!this.c){this.c=true;H.iter(function(bw){bw();},this.r);}},Cancel$1:function(){var bv;if(!this.c){this.c=true;bv=H.choose(function(bw){try{bw();return null;}catch(bx){return{$:1,$0:bx};}},this.r);if(H.length(bv)>0)throw new _1.New$3(bv);else void 0;}}},e,L);L.CreateLinkedTokenSource=function(bv,bw){return L.CreateLinkedTokenSource$1([bv,bw]);};L.CreateLinkedTokenSource$1=function(bv){var bw;bw=new L.New();H.iter(function(bx){function by(bz){return bw.Cancel$1();}z.Register(bx,function(){by();});},bv);return bw;};L.New=bp.Ctor(function(){this.c=false;this.pending=null;this.r=[];this.init=1;},L);M.IsWhiteSpace=function(bv){return bv.match(new a.RegExp("\\s"))!==null;};M.Parse=function(bv){return bv.length===1?bv:w.FailWith("String must be exactly one character long.");};M.IsUpper=function(bv){return bv>="A"&&bv<="Z";};M.IsLower=function(bv){return bv>="a"&&bv<="z";};M.IsLetterOrDigit=function(bv){return M.IsLetter(bv)||M.IsDigit(bv);};M.IsLetter=function(bv){return bv>="A"&&bv<="Z"||bv>="a"&&bv<="z";};M.IsDigit=function(bv){return bv>="0"&&bv<="9";};M.IsControl=function(bv){return bv>="\u0000"&&bv<="\u001f"||bv>="\u0080"&&bv<="\u009f";};M.GetNumericValue=function(bv){return bv>="0"&&bv<="9"?bv.charCodeAt()-"0".charCodeAt():-1;};N.observer=function(bv){return{OnCompleted:function(){return null;},OnError:function(){return null;},OnNext:bv};};O.LongTime=function(bv){return(new bs(bv)).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:false});};O.ShortTime=function(bv){return(new bs(bv)).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",hour12:false});};O.LongDate=function(bv){return(new bs(bv)).toLocaleDateString({},{year:"numeric",month:"long",day:"numeric",weekday:"long"});};O.Parse=function(bv){var bw;bw=O.TryParse(bv);return bw!=null&&bw.$==1?bw.$0:w.FailWith("Failed to parse date string.");};O.TryParse=function(bv){var bw;bw=bs.parse(bv);return a.isNaN(bw)?null:{$:1,$0:bw};};O.AddMonths=function(bv,bw){var bx;bx=new bs(bv);return(new bs(bx.getFullYear(),bx.getMonth()+bw,bx.getDate(),bx.getHours(),bx.getMinutes(),bx.getSeconds(),bx.getMilliseconds())).getTime();};O.AddYears=function(bv,bw){var bx;bx=new bs(bv);return(new bs(bx.getFullYear()+bw,bx.getMonth(),bx.getDate(),bx.getHours(),bx.getMinutes(),bx.getSeconds(),bx.getMilliseconds())).getTime();};O.TimePortion=function(bv){var bw;bw=new bs(bv);return(((24*0+bw.getHours())*60+bw.getMinutes())*60+bw.getSeconds())*1000+bw.getMilliseconds();};O.DatePortion=function(bv){var bw;bw=new bs(bv);return(new bs(bw.getFullYear(),bw.getMonth(),bw.getDate())).getTime();};P=b.DateTimeOffset=bp.Class({ToUniversalTime:function(){return new P.New(this.d,0);},ToLocalTime:function(){return new P.New(this.d,(new bs()).getTimezoneOffset());}},e,P);P.New=bp.Ctor(function(bv,bw){this.d=bv;},P);Q.InvocationList=function(bv){return bv.$Invokes||[bv];};Q.RemoveAll=function(bv,bw){var bx;bx=Q.InvocationList(bv);H.length(Q.InvocationList(bw))>1?w.FailWith("TODO: Remove multicast delegates"):void 0;return bp.CreateDelegate(H.filter(function(by){return!bm.Equals(by,bw);},bx));};Q.Remove=function(bv,bw){var bx,by,bz,bA,bB,bC,bD;bz=Q.InvocationList(bv);if(H.length(Q.InvocationList(bw))>1)w.FailWith("TODO: Remove multicast delegates");bA=[];by=false;for(bB=H.length(bz)-1,bC=0;bB>=bC;bB--){bD=H.get(bz,bB);!by&&bp.DelegateEqual(bD,bw)?by=true:bA.unshift(bD);}return bp.CreateDelegate(bA);};Q.DelegateTarget=function(bv){var bw;return!bv?null:"$Target"in bv?bv.$Target:"$Invokes"in bv?(bw=bv.$Invokes,(H.get(bw,H.length(bw)-1))[1]):null;};R.getHashCode=function(bv,bw){return bv.CGetHashCode(bw);};R.equals=function(bv){return function(bw,bx){return bv.CEquals(bw,bx);};};R.alreadyAdded=function(){return w.FailWith("An item with the same key has already been added.");};R.notPresent=function(){return w.FailWith("The given key was not present in the dictionary.");};S=f.KeyCollection=bp.Class({GetEnumerator$1:function(){return E.Get(I.map(function(bv){return bv.K;},this.d));},get_Count:function(){return this.d.count;},GetEnumerator0:function(){return this.GetEnumerator$1();},GetEnumerator:function(){return this.GetEnumerator$1();}},e,S);S.New=bp.Ctor(function(bv){this.d=bv;},S);T=f.ValueCollection=bp.Class({GetEnumerator$1:function(){return E.Get(I.map(function(bv){return bv.V;},this.d));},get_Count:function(){return this.d.count;},GetEnumerator0:function(){return this.GetEnumerator$1();},GetEnumerator:function(){return this.GetEnumerator$1();}},e,T);T.New=bp.Ctor(function(bv){this.d=bv;},T);U=f.Dictionary=bp.Class({remove:function(bv){var bw,bx,by,bz;bw=this;bx=this.hash(bv);by=this.data[bx];return by&&(bz=H.filter(function(bA){return!bw.equals.apply(null,[(w.KeyValue(bA))[0],bv]);},by),H.length(bz)<by.length&&(this.count=this.count-1,this.data[bx]=bz,true));},add:function(bv,bw){var bx,by,bz;bx=this;by=this.hash(bv);bz=this.data[by];bz?(H.exists(function(bA){return bx.equals.apply(null,[(w.KeyValue(bA))[0],bv]);},bz)?R.alreadyAdded():void 0,this.count=this.count+1,bz.push({K:bv,V:bw})):(this.count=this.count+1,this.data[by]=new a.Array({K:bv,V:bw}));},set:function(bv,bw){var bx,by,bz,bA;bx=this;by=this.hash(bv);bz=this.data[by];bz?(bA=H.tryFindIndex(function(bB){return bx.equals.apply(null,[(w.KeyValue(bB))[0],bv]);},bz),bA==null?(this.count=this.count+1,bz.push({K:bv,V:bw})):bz[bA.$0]={K:bv,V:bw}):(this.count=this.count+1,this.data[by]=new a.Array({K:bv,V:bw}));},get:function(bv){var bw,bx;bw=this;bx=this.data[this.hash(bv)];return bx?H.pick(function(by){var bz;bz=w.KeyValue(by);return bw.equals.apply(null,[bz[0],bv])?{$:1,$0:bz[1]}:null;},bx):R.notPresent();},get_Keys:function(){return new S.New(this);},get_Values:function(){return new T.New(this);},TryGetValue:function(bv,bw){var bx,by,bz;bx=this;by=this.data[this.hash(bv)];return by&&(bz=H.tryPick(function(bA){var bB;bB=w.KeyValue(bA);return bx.equals.apply(null,[bB[0],bv])?{$:1,$0:bB[1]}:null;},by),bz!=null&&bz.$==1&&(bw.set(bz.$0),true));},Remove:function(bv){return this.remove(bv);},GetEnumerator$1:function(){return E.Get0(this);},set_Item:function(bv,bw){this.set(bv,bw);},get_Item:function(bv){return this.get(bv);},ContainsKey:function(bv){var bw,bx;bw=this;bx=this.data[this.hash(bv)];return bx&&H.exists(function(by){return bw.equals.apply(null,[(w.KeyValue(by))[0],bv]);},bx);},Clear:function(){this.data=[];this.count=0;},Add:function(bv,bw){this.add(bv,bw);},GetEnumerator:function(){return E.Get0(this);},GetEnumerator0:function(){return E.Get0(H.concat(d.GetFieldValues(this.data)));}},e,U);U.New=bp.Ctor(function(bv,bw){U.New$6.call(this,bv,R.equals(bw),function(bx){return R.getHashCode(bw,bx);});},U);U.New$1=bp.Ctor(function(bv){U.New$6.call(this,bv,bm.Equals,bm.Hash);},U);U.New$2=bp.Ctor(function(bv,bw){U.New$3.call(this,bw);},U);U.New$3=bp.Ctor(function(bv){U.New$6.call(this,[],R.equals(bv),function(bw){return R.getHashCode(bv,bw);});},U);U.New$4=bp.Ctor(function(bv){U.New$5.call(this);},U);U.New$5=bp.Ctor(function(){U.New$6.call(this,[],bm.Equals,bm.Hash);},U);U.New$6=bp.Ctor(function(bv,bw,bx){var by,bz;this.equals=bw;this.hash=bx;this.count=0;this.data=[];by=E.Get(bv);try{while(by.MoveNext()){bz=by.Current();this.set(bz.K,bz.V);}}finally{if("Dispose"in by)by.Dispose();}},U);V=b.MatchFailureException=bp.Class({},null,V);V.New=bp.Ctor(function(bv,bw,bx){this.message=bv+" at "+br(bw)+":"+br(bx);},V);W=b.IndexOutOfRangeException=bp.Class({},null,W);W.New=bp.Ctor(function(){W.New$1.call(this,"Index was outside the bounds of the array.");},W);W.New$1=bp.Ctor(function(bv){this.message=bv;},W);X=b.OperationCanceledException=bp.Class({},null,X);X.New=bp.Ctor(function(bv){X.New$1.call(this,"The operation was canceled.",null,bv);},X);X.New$1=bp.Ctor(function(bv,bw,bx){this.message=bv;this.inner=bw;this.ct=bx;},X);Y=b.ArgumentException=bp.Class({},null,Y);Y.New=bp.Ctor(function(bv,bw){Y.New$2.call(this,bw+"\nParameter name: "+bv);},Y);Y.New$1=bp.Ctor(function(){Y.New$2.call(this,"Value does not fall within the expected range.");},Y);Y.New$2=bp.Ctor(function(bv){this.message=bv;},Y);Z=b.ArgumentOutOfRangeException=bp.Class({},null,Z);Z.New=bp.Ctor(function(){Z.New$1.call(this,"Specified argument was out of the range of valid values.");},Z);Z.New$1=bp.Ctor(function(bv){this.message=bv;},Z);_0=b.InvalidOperationException=bp.Class({},null,_0);_0.New=bp.Ctor(function(){_0.New$1.call(this,"Operation is not valid due to the current state of the object.");},_0);_0.New$1=bp.Ctor(function(bv){this.message=bv;},_0);_1=b.AggregateException=bp.Class({},null,_1);_1.New=bp.Ctor(function(bv,bw){_1.New$4.call(this,bv,[bw]);},_1);_1.New$1=bp.Ctor(function(bv,bw){_1.New$4.call(this,bv,H.ofSeq(bw));},_1);_1.New$2=bp.Ctor(function(bv){_1.New$4.call(this,"One or more errors occurred.",H.ofSeq(bv));},_1);_1.New$3=bp.Ctor(function(bv){_1.New$4.call(this,"One or more errors occurred.",bv);},_1);_1.New$4=bp.Ctor(function(bv,bw){this.message=bv;this.innerExceptions=bw;},_1);_2=b.TimeoutException=bp.Class({},null,_2);_2.New=bp.Ctor(function(){_2.New$1.call(this,"The operation has timed out.");},_2);_2.New$1=bp.Ctor(function(bv){this.message=bv;},_2);_3=b.FormatException=bp.Class({},null,_3);_3.New=bp.Ctor(function(){_3.New$1.call(this,"One of the identified items was in an invalid format.");},_3);_3.New$1=bp.Ctor(function(bv){this.message=bv;},_3);_4=b.OverflowException=bp.Class({},null,_4);_4.New=bp.Ctor(function(){_4.New$1.call(this,"Arithmetic operation resulted in an overflow.");},_4);_4.New$1=bp.Ctor(function(bv){this.message=bv;},_4);H.create2D=function(bv){var bw;bw=H.ofSeq(I.map(H.ofSeq,bv));bw.dims=2;return bw;};_5.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(bv){var bw,bx;bw=bu.random()*16|0;bx=bv=="x"?bw:bw&3|8;return bx.toString(16);});};_6.concat=function(bv){var bw,bx;bw=[];for(var by in bv)bw.push.apply(bw,bv[by]);return bw;};_7=f.HashSet=bp.Class({add:function(bv){var bw,bx;bw=this.hash(bv);bx=this.data[bw];return bx==null?(this.data[bw]=[bv],this.count=this.count+1,true):this.arrContains(bv,bx)?false:(bx.push(bv),this.count=this.count+1,true);},arrRemove:function(bv,bw){var bx,by,bz,bA;bx=true;by=0;bA=bw.length;while(bx&&by<bA)if(this.equals.apply(null,[bw[by],bv])){bw.splice.apply(bw,[by,1]);bx=false;}else by=by+1;return!bx;},arrContains:function(bv,bw){var bx,by,bz,bA;bx=true;by=0;bA=bw.length;while(bx&&by<bA)if(this.equals.apply(null,[bw[by],bv]))bx=false;else by=by+1;return!bx;},UnionWith:function(bv){var bw;bw=E.Get(bv);try{while(bw.MoveNext())this.Add(bw.Current());}finally{if("Dispose"in bw)bw.Dispose();}},SymmetricExceptWith:function(bv){var bw,bx;bw=E.Get(bv);try{while(bw.MoveNext()){bx=bw.Current();this.Contains(bx)?this.Remove(bx):this.Add(bx);}}finally{if("Dispose"in bw)bw.Dispose();}},SetEquals:function(bv){var bw;bw=new _7.New$4(bv,this.equals,this.hash);return this.get_Count()===bw.get_Count()&&this.IsSupersetOf(bw);},RemoveWhere:function(bv){var bw,bx,by,bz,bA;bx=_6.concat(this.data);bw=0;for(by=0,bz=bx.length-1;by<=bz;by++){bA=bx[by];bv(bA)?this.Remove(bA)?bw=bw+1:void 0:void 0;}return bw;},Remove:function(bv){var bw;bw=this.data[this.hash(bv)];return bw==null?false:this.arrRemove(bv,bw)&&(this.count=this.count-1,true);},Overlaps:function(bv){var bw;bw=this;return I.exists(function(bx){return bw.Contains(bx);},bv);},IsSupersetOf:function(bv){var bw;bw=this;return I.forall(function(bx){return bw.Contains(bx);},bv);},IsSubsetOf:function(bv){var bw;bw=new _7.New$4(bv,this.equals,this.hash);return H.forall(function(bx){return bw.Contains(bx);},_6.concat(this.data));},IsProperSupersetOf:function(bv){var bw;bw=H.ofSeq(bv);return this.count>H.length(bw)&&this.IsSupersetOf(bw);},IsProperSubsetOf:function(bv){var bw;bw=H.ofSeq(bv);return this.count<H.length(bw)&&this.IsSubsetOf(bw);},IntersectWith:function(bv){var bw,bx,by,bz,bA;bw=new _7.New$4(bv,this.equals,this.hash);bx=_6.concat(this.data);for(by=0,bz=bx.length-1;by<=bz;by++){bA=bx[by];!bw.Contains(bA)?this.Remove(bA):void 0;}},ExceptWith:function(bv){var bw;bw=E.Get(bv);try{while(bw.MoveNext())this.Remove(bw.Current());}finally{if("Dispose"in bw)bw.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bv){var bw,bx,by,bz;bw=0;bx=_6.concat(this.data);for(by=0,bz=bx.length-1;by<=bz;by++)H.set(bv,by,bx[by]);},Contains:function(bv){var bw;bw=this.data[this.hash(bv)];return bw==null?false:this.arrContains(bv,bw);},Clear:function(){this.data=[];this.count=0;},Add:function(bv){return this.add(bv);},GetEnumerator:function(){return E.Get(_6.concat(this.data));},GetEnumerator0:function(){return E.Get(_6.concat(this.data));}},e,_7);_7.New=bp.Ctor(function(bv,bw){_7.New$4.call(this,bv,R.equals(bw),function(bx){return R.getHashCode(bw,bx);});},_7);_7.New$1=bp.Ctor(function(bv){_7.New$4.call(this,[],R.equals(bv),function(bw){return R.getHashCode(bv,bw);});},_7);_7.New$2=bp.Ctor(function(bv){_7.New$4.call(this,bv,bm.Equals,bm.Hash);},_7);_7.New$3=bp.Ctor(function(){_7.New$4.call(this,[],bm.Equals,bm.Hash);},_7);_7.New$4=bp.Ctor(function(bv,bw,bx){var by;this.equals=bw;this.hash=bx;this.data=[];this.count=0;by=E.Get(bv);try{while(by.MoveNext())this.add(by.Current());}finally{if("Dispose"in by)by.Dispose();}},_7);_9.New=function(bv,bw,bx){return{c:bv,v:bw,f:bx};};_.Force=function(bv){return bv.f();};_.CreateFromValue=function(bv){return _9.New(true,bv,_.cachedLazy);};_.Create=function(bv){return _9.New(false,bv,_.forceLazy);};_.forceLazy=function(){var bv;bv=this.v();this.c=true;this.v=bv;this.f=_.cachedLazy;return bv;};_.cachedLazy=function(){return this.v;};$=J.T=bp.Class({GetSlice:function(bv,bw){var bx;return bv!=null&&bv.$==1?bw!=null&&bw.$==1?(bx=bv.$0,J.ofSeq(I.take(bw.$0-bx+1,J.skip(bx,this)))):J.skip(bv.$0,this):bw!=null&&bw.$==1?J.ofSeq(I.take(bw.$0+1,this)):this;},get_Item:function(bv){return I.nth(bv,this);},get_Length:function(){return J.length(this);},GetEnumerator:function(){return new F.New(this,null,function(bv){var bw;bw=bv.s;return bw.$==0?false:(bv.c=bw.$0,bv.s=bw.$1,true);},void 0);},GetEnumerator0:function(){return E.Get(this);}},null,$);$.Empty=new $({$:0});J.allPairs=function(bv,bw){return J.ofArray(H.allPairs(H.ofList(bv),H.ofList(bw)));};J.append=function(bv,bw){var bx,by,bz,bA,bB;if(bv.$==0)return bw;else if(bw.$==0)return bv;else{bA=new $({$:1});bx=bA;by=bv;bz=true;while(bz){bx.$0=by.$0;by=by.$1;by.$==0?bz=false:bx=(bB=new $({$:1}),bx.$1=bB,bB);}bx.$1=bw;return bA;}};J.choose=function(bv,bw){return J.ofSeq(I.choose(bv,bw));};J.collect=function(bv,bw){return J.ofSeq(I.collect(bv,bw));};J.concat=function(bv){return J.ofSeq(I.concat(bv));};J.exists=function(bv,bw){var bx,by;bx=false;by=bw;while(!bx&&by.$==1){bx=bv(by.$0);by=by.$1;}return bx;};J.exists2=function(bv,bw,bx){var by,bz,bA;by=false;bz=bw;bA=bx;while(!by&&bz.$==1&&bA.$==1){by=bv(bz.$0,bA.$0);bz=bz.$1;bA=bA.$1;}!by&&(bz.$==1||bA.$==1)?J.badLengths():void 0;return by;};J.filter=function(bv,bw){return J.ofSeq(I.filter(bv,bw));};J.fold2=function(bv,bw,bx,by){return H.fold2(bv,bw,H.ofList(bx),H.ofList(by));};J.foldBack=function(bv,bw,bx){return H.foldBack(bv,H.ofList(bw),bx);};J.foldBack2=function(bv,bw,bx,by){return H.foldBack2(bv,H.ofList(bw),H.ofList(bx),by);};J.forAll=function(bv,bw){var bx,by;bx=true;by=bw;while(bx&&by.$==1){bx=bv(by.$0);by=by.$1;}return bx;};J.forall2=function(bv,bw,bx){var by,bz,bA;by=true;bz=bw;bA=bx;while(by&&bz.$==1&&bA.$==1){by=bv(bz.$0,bA.$0);bz=bz.$1;bA=bA.$1;}by&&(bz.$==1||bA.$==1)?J.badLengths():void 0;return by;};J.head=function(bv){return bv.$==1?bv.$0:J.listEmpty();};J.init=function(bv,bw){return J.ofArray(H.init(bv,bw));};J.iter=function(bv,bw){var bx;bx=bw;while(bx.$==1){bv(J.head(bx));bx=J.tail(bx);}};J.iter2=function(bv,bw,bx){var by,bz;by=bw;bz=bx;while(by.$==1){bz.$==0?J.badLengths():void 0;bv(J.head(by),J.head(bz));by=J.tail(by);bz=J.tail(bz);}bz.$==1?J.badLengths():void 0;};J.iteri=function(bv,bw){var bx,by;bx=bw;by=0;while(bx.$==1){bv(by,J.head(bx));bx=J.tail(bx);by=by+1;}};J.iteri2=function(bv,bw,bx){var by,bz,bA;by=bw;bz=bx;bA=0;while(by.$==1){bz.$==0?J.badLengths():void 0;bv(bA,J.head(by),J.head(bz));by=J.tail(by);bz=J.tail(bz);bA=bA+1;}bz.$==1?J.badLengths():void 0;};J.length=function(bv){var bw,bx;bw=bv;bx=0;while(bw.$==1){bw=J.tail(bw);bx=bx+1;}return bx;};J.map=function(bv,bw){var bx,by,bz,bA,bB;if(bw.$==0)return bw;else{bA=new $({$:1});bx=bA;by=bw;bz=true;while(bz){bx.$0=bv(by.$0);by=by.$1;by.$==0?bz=false:bx=(bB=new $({$:1}),bx.$1=bB,bB);}bx.$1=$.Empty;return bA;}};J.map2=function(bv,bw,bx){var by,bz,bA,bB,bC,bD;by=bw.$==1&&bx.$==1;if(!by)return bw.$==1||bx.$==1?J.badLengths():bw;else{bC=new $({$:1});bz=bC;bA=bw;bB=bx;while(by){bz.$0=bv(bA.$0,bB.$0);bA=bA.$1;bB=bB.$1;bA.$==1&&bB.$==1?bz=(bD=new $({$:1}),bz.$1=bD,bD):by=false;}if(bA.$==1||bB.$==1)J.badLengths();bz.$1=$.Empty;return bC;}};J.map3=function(bv,bw,bx,by){var bz,bA,bB,bC,bD,bE,bF;bz=bw.$==1&&bx.$==1&&by.$==1;if(!bz)return bw.$==1||bx.$==1||by.$==1?J.badLengths():bw;else{bE=new $({$:1});bA=bE;bB=bw;bC=bx;bD=by;while(bz){bA.$0=bv(bB.$0,bC.$0,bD.$0);bB=bB.$1;bC=bC.$1;bD=bD.$1;bB.$==1&&bC.$==1&&bD.$==1?bA=(bF=new $({$:1}),bA.$1=bF,bF):bz=false;}if(bB.$==1||bC.$==1||bD.$==1)J.badLengths();bA.$1=$.Empty;return bE;}};J.mapi=function(bv,bw){var bx,by,bz,bA,bB,bC;if(bw.$==0)return bw;else{bB=new $({$:1});bx=bB;by=bw;bz=0;bA=true;while(bA){bx.$0=bv(bz,by.$0);by=by.$1;by.$==0?bA=false:(bx=(bC=new $({$:1}),bx.$1=bC,bC),bz=bz+1);}bx.$1=$.Empty;return bB;}};J.mapi2=function(bv,bw,bx){var by,bz,bA,bB,bC,bD,bE;by=bw.$==1&&bx.$==1;if(!by)return bw.$==1||bx.$==1?J.badLengths():bw;else{bD=new $({$:1});bz=bD;bA=bw;bB=bx;bC=0;while(by){bz.$0=bv(bC,bA.$0,bB.$0);bA=bA.$1;bB=bB.$1;bA.$==1&&bB.$==1?(bz=(bE=new $({$:1}),bz.$1=bE,bE),bC=bC+1):by=false;}if(bA.$==1||bB.$==1)J.badLengths();bz.$1=$.Empty;return bD;}};J.max=function(bv){return I.reduce(function(bw,bx){return bm.Compare(bw,bx)===1?bw:bx;},bv);};J.maxBy=function(bv,bw){return I.reduce(function(bx,by){return bm.Compare(bv(bx),bv(by))===1?bx:by;},bw);};J.min=function(bv){return I.reduce(function(bw,bx){return bm.Compare(bw,bx)===-1?bw:bx;},bv);};J.minBy=function(bv,bw){return I.reduce(function(bx,by){return bm.Compare(bv(bx),bv(by))===-1?bx:by;},bw);};J.ofArray=function(bv){var bw,bx,by;bw=$.Empty;for(bx=H.length(bv)-1,by=0;bx>=by;bx--)bw=new $({$:1,$0:H.get(bv,bx),$1:bw});return bw;};J.ofSeq=function(bv){var bw,bx,by,bz,bA,bB;if(bv instanceof $)return bv;else if(bv instanceof a.Array)return J.ofArray(bv);else{bw=E.Get(bv);try{by=bw.MoveNext();if(!by)bx=$.Empty;else{bA=new $({$:1});bz=bA;while(by){bz.$0=bw.Current();bw.MoveNext()?bz=(bB=new $({$:1}),bz.$1=bB,bB):by=false;}bz.$1=$.Empty;bx=bA;}return bx;}finally{if("Dispose"in bw)bw.Dispose();}}};J.partition=function(bv,bw){var bx;bx=H.partition(bv,H.ofList(bw));return[J.ofArray(bx[0]),J.ofArray(bx[1])];};J.permute=function(bv,bw){return J.ofArray(H.permute(bv,H.ofList(bw)));};J.reduceBack=function(bv,bw){return H.reduceBack(bv,H.ofList(bw));};J.replicate=function(bv,bw){return J.ofArray(H.create(bv,bw));};J.rev=function(bv){var bw,bx;bw=$.Empty;bx=bv;while(bx.$==1){bw=new $({$:1,$0:bx.$0,$1:bw});bx=bx.$1;}return bw;};J.scan=function(bv,bw,bx){return J.ofSeq(I.scan(bv,bw,bx));};J.scanBack=function(bv,bw,bx){return J.ofArray(H.scanBack(bv,H.ofList(bw),bx));};J.sort=function(bv){var bw;bw=H.ofList(bv);H.sortInPlace(bw);return J.ofArray(bw);};J.sortBy=function(bv,bw){return J.sortWith(function(bx,by){return bm.Compare(bv(bx),bv(by));},bw);};J.sortByDescending=function(bv,bw){return J.sortWith(function(bx,by){return-bm.Compare(bv(bx),bv(by));},bw);};J.sortDescending=function(bv){var bw;bw=H.ofList(bv);H.sortInPlaceByDescending(a.id,bw);return J.ofArray(bw);};J.sortWith=function(bv,bw){var bx;bx=H.ofList(bw);H.sortInPlaceWith(bv,bx);return J.ofArray(bx);};J.tail=function(bv){return bv.$==1?bv.$1:J.listEmpty();};J.unzip=function(bv){var bw,bx,by,bz;bw=[];bx=[];by=E.Get(bv);try{while(by.MoveNext()){bz=by.Current();bw.push(bz[0]);bx.push(bz[1]);}}finally{if("Dispose"in by)by.Dispose();}return[J.ofArray(bw.slice(0)),J.ofArray(bx.slice(0))];};J.unzip3=function(bv){var bw,bx,by,bz,bA;bw=[];bx=[];by=[];bz=E.Get(bv);try{while(bz.MoveNext()){bA=bz.Current();bw.push(bA[0]);bx.push(bA[1]);by.push(bA[2]);}}finally{if("Dispose"in bz)bz.Dispose();}return[J.ofArray(bw.slice(0)),J.ofArray(bx.slice(0)),J.ofArray(by.slice(0))];};J.zip=function(bv,bw){return J.map2(function(bx,by){return[bx,by];},bv,bw);};J.zip3=function(bv,bw,bx){return J.map3(function(by,bz,bA){return[by,bz,bA];},bv,bw,bx);};J.chunkBySize=function(bv,bw){return J.map(J.ofArray,J.ofSeq(I.chunkBySize(bv,bw)));};J.compareWith=function(bv,bw,bx){return I.compareWith(bv,bw,bx);};J.countBy=function(bv,bw){return J.ofArray(H.countBy(bv,H.ofList(bw)));};J.distinct=function(bv){return J.ofSeq(I.distinct(bv));};J.distinctBy=function(bv,bw){return J.ofSeq(I.distinctBy(bv,bw));};J.splitInto=function(bv,bw){return J.map(J.ofArray,J.ofArray(H.splitInto(bv,H.ofList(bw))));};J.except=function(bv,bw){return J.ofSeq(I.except(bv,bw));};J.tryFindBack=function(bv,bw){return H.tryFindBack(bv,H.ofList(bw));};J.findBack=function(bv,bw){var bx;bx=J.tryFindBack(bv,bw);return bx==null?w.FailWith("KeyNotFoundException"):bx.$0;};J.findIndexBack=function(bv,bw){var bx;bx=H.tryFindIndexBack(bv,H.ofList(bw));return bx==null?w.FailWith("KeyNotFoundException"):bx.$0;};J.groupBy=function(bv,bw){var bx;function by(bz,bA){return[bz,J.ofArray(bA)];}bx=H.groupBy(bv,H.ofList(bw));H.mapInPlace(function(bz){return by(bz[0],bz[1]);},bx);return J.ofArray(bx);};J.last=function(bv){var bw,bx;bv.$==0?J.listEmpty():null;bw=bv;bx=bw.$1;while(bx.$==1){bw=bx;bx=bw.$1;}return bw.$0;};J.contains=function(bv,bw){var bx,by;bx=false;by=bw;while(!bx&&by.$==1){bx=bm.Equals(bv,by.$0);by=by.$1;}return bx;};J.mapFold=function(bv,bw,bx){var by;by=H.mapFold(bv,bw,H.ofList(bx));return[J.ofArray(by[0]),by[1]];};J.mapFoldBack=function(bv,bw,bx){var by;by=H.mapFoldBack(bv,H.ofList(bw),bx);return[J.ofArray(by[0]),by[1]];};J.pairwise=function(bv){return J.ofSeq(I.pairwise(bv));};J.indexed=function(bv){return J.mapi(function(bw,bx){return[bw,bx];},bv);};J.tryHead=function(bv){return bv.$==0?null:{$:1,$0:bv.$0};};J.exactlyOne=function(bv){var bw;return bv.$==1&&(bv.$1.$==0&&(bw=bv.$0,true))?bw:w.FailWith("The input does not have precisely one element.");};J.unfold=function(bv,bw){return J.ofSeq(I.unfold(bv,bw));};J.windowed=function(bv,bw){return J.ofSeq(I.map(J.ofArray,I.windowed(bv,bw)));};J.splitAt=function(bv,bw){return[J.ofSeq(I.take(bv,bw)),J.skip(bv,bw)];};J.listEmpty=function(){return w.FailWith("The input list was empty.");};J.badLengths=function(){return w.FailWith("The lists have different lengths.");};x.getOrValue=function(bv,bw){return bv==null?bw:bv;};x.get=function(bv){return bv==null?w.FailWith("Nullable object must have a value."):bv;};w.range=function(bv,bw){var bx;bx=1+bw-bv;return bx<=0?[]:I.init(bx,function(by){return by+bv;});};w.step=function(bv,bw,bx){var by;by=w.Sign(bw);return I.takeWhile(function(bz){return by*(bx-bz)>=0;},I.initInfinite(function(bz){return bv+bz*bw;}));};w.KeyValue=function(bv){return[bv.K,bv.V];};w.Truncate=function(bv){return bv<0?bu.ceil(bv):bu.floor(bv);};w.Sign=function(bv){return bv===0?0:bv<0?-1:1;};w.Pown=function(bv,bw){function bx(by){var bz;return by===1?bv:by%2===0?(bz=bx(by/2>>0),bz*bz):bv*bx(by-1);}return bx(bw);};w.InvalidArg=function(bv,bw){throw new Y.New(bv,bw);};w.InvalidOp=function(bv){throw new _0.New$1(bv);};w.FailWith=function(bv){throw a.Error(bv);};ba.string=function(bv,bw,bx){return bw==null?bx!=null&&bx.$==1?bv.slice(0,bx.$0+1):"":bx==null?bv.slice(bw.$0):bv.slice(bw.$0,bx.$0+1);};ba.array=function(bv,bw,bx){return bw==null?bx!=null&&bx.$==1?bv.slice(0,bx.$0+1):[]:bx==null?bv.slice(bw.$0):bv.slice(bw.$0,bx.$0+1);};ba.setArray=function(bv,bw,bx,by){var bz;bz=bw!=null&&bw.$==1?bw.$0:0;H.setSub(bv,bz,(bx!=null&&bx.$==1?bx.$0:bv.length-1)-bz+1,by);};ba.array2D=function(bv,bw,bx,by,bz){var bA,bB;bA=bw!=null&&bw.$==1?bw.$0:0;bB=by!=null&&by.$==1?by.$0:0;return H.sub2D(bv,bA,bB,(bx!=null&&bx.$==1?bx.$0:bv.length-1)-bA+1,(bz!=null&&bz.$==1?bz.$0:(bv.length?bv[0].length:0)-1)-bB+1);};ba.array2Dfix1=function(bv,bw,bx,by){var bz,bA,bB,bC,bD,bE;bz=bx!=null&&bx.$==1?bx.$0:0;bA=by!=null&&by.$==1?by.$0:(bv.length?bv[0].length:0)-1;bB=bA-bz+1;bC=new a.Array(bB);for(bD=0,bE=bB-1;bD<=bE;bD++)H.set(bC,bD,H.get2D(bv,bw,bz+bD));return bC;};ba.array2Dfix2=function(bv,bw,bx,by){var bz,bA,bB,bC,bD,bE;bz=bw!=null&&bw.$==1?bw.$0:0;bA=bx!=null&&bx.$==1?bx.$0:bv.length-1;bB=bA-bz+1;bC=new a.Array(bB);for(bD=0,bE=bB-1;bD<=bE;bD++)H.set(bC,bD,H.get2D(bv,bz+bD,by));return bC;};ba.setArray2Dfix1=function(bv,bw,bx,by,bz){var bA,bB,bC,bD;bA=bx!=null&&bx.$==1?bx.$0:0;bB=by!=null&&by.$==1?by.$0:(bv.length?bv[0].length:0)-1;for(bC=0,bD=bB-bA+1-1;bC<=bD;bC++)H.set2D(bv,bw,bA+bC,H.get(bz,bC));};ba.setArray2Dfix2=function(bv,bw,bx,by,bz){var bA,bB,bC,bD;bA=bw!=null&&bw.$==1?bw.$0:0;bB=bx!=null&&bx.$==1?bx.$0:bv.length-1;for(bC=0,bD=bB-bA+1-1;bC<=bD;bC++)H.set2D(bv,bA+bC,by,H.get(bz,bC));};ba.setArray2D=function(bv,bw,bx,by,bz,bA){var bB,bC;bB=bw!=null&&bw.$==1?bw.$0:0;bC=by!=null&&by.$==1?by.$0:0;H.setSub2D(bv,bB,bC,(bx!=null&&bx.$==1?bx.$0:bv.length-1)-bB+1,(bz!=null&&bz.$==1?bz.$0:(bv.length?bv[0].length:0)-1)-bC+1,bA);};bb.filter=function(bv,bw){var bx;return bw!=null&&bw.$==1&&(bv(bw.$0)&&(bx=bw.$0,true))?bw:null;};bb.fold=function(bv,bw,bx){return bx==null?bw:bv(bw,bx.$0);};bb.foldBack=function(bv,bw,bx){return bw==null?bx:bv(bw.$0,bx);};bb.ofNullable=function(bv){return bv==null?null:{$:1,$0:x.get(bv)};};bb.ofObj=function(bv){return bv==null?null:{$:1,$0:bv};};bb.toArray=function(bv){return bv==null?[]:[bv.$0];};bb.toList=function(bv){return bv==null?$.Empty:J.ofArray([bv.$0]);};bb.toNullable=function(bv){return bv!=null&&bv.$==1?bv.$0:null;};bb.toObj=function(bv){return bv==null?null:bv.$0;};bc.CopyTo=function(bv,bw,bx){H.blit(bv,0,bw,bx,H.length(bv));};bc.Contains=function(bv,bw){return I.exists(function(bx){return bm.Equals(bw,bx);},bv);};bc.Clear=function(bv){bv.splice(0,H.length(bv));};bd=b.Random=bp.Class({NextBytes:function(bv){var bw,bx;for(bw=0,bx=H.length(bv)-1;bw<=bx;bw++)H.set(bv,bw,bu.floor(bu.random()*256));},Next:function(bv,bw){return bv>bw?w.FailWith("'minValue' cannot be greater than maxValue."):bv+bu.floor(bu.random()*(bw-bv));},Next$1:function(bv){return bv<0?w.FailWith("'maxValue' must be greater than zero."):bu.floor(bu.random()*bv);},Next$2:function(){return bu.floor(bu.random()*2147483648);}},e,bd);bd.New=bp.Ctor(function(){},bd);be.New=function(bv){return[bv];};bf.MapError=function(bv,bw){return bw.$==1?{$:1,$0:bv(bw.$0)}:{$:0,$0:bw.$0};};bf.Map=function(bv,bw){return bw.$==1?{$:1,$0:bw.$0}:{$:0,$0:bv(bw.$0)};};bf.Bind=function(bv,bw){return bw.$==1?{$:1,$0:bw.$0}:bv(bw.$0);};I.enumFinally=function(bv,bw){return{GetEnumerator:function(){var bx;try{bx=E.Get(bv);}catch(by){bw();throw by;}return new F.New(null,null,function(bz){return bx.MoveNext()&&(bz.c=bx.Current(),true);},function(){bx.Dispose();bw();});}};};I.enumUsing=function(bv,bw){return{GetEnumerator:function(){var bx;try{bx=E.Get(bw(bv));}catch(by){bv.Dispose();throw by;}return new F.New(null,null,function(bz){return bx.MoveNext()&&(bz.c=bx.Current(),true);},function(){bx.Dispose();bv.Dispose();});}};};I.enumWhile=function(bv,bw){return{GetEnumerator:function(){return new F.New(null,null,function(bx){var by;while(true){by=bx.s;if(bm.Equals(by,null)){if(bv()){bx.s=E.Get(bw);bx=bx;}else return false;}else if(by.MoveNext()){bx.c=by.Current();return true;}else{by.Dispose();bx.s=null;bx=bx;}}},function(bx){var by;by=bx.s;!bm.Equals(by,null)?by.Dispose():void 0;});}};};bg.createEvent=function(bv,bw,bx){return{AddHandler:bv,RemoveHandler:bw,Subscribe:function(by){var bz;bz=bx(function(){return function(bA){return by.OnNext(bA);};});bv(bz);return{Dispose:function(){return bw(bz);}};}};};I.allPairs=function(bv,bw){var bx;bx=I.cache(bw);return I.collect(function(by){return I.map(function(bz){return[by,bz];},bx);},bv);};I.append=function(bv,bw){return{GetEnumerator:function(){var bx;bx=[true];return new F.New(E.Get(bv),null,function(by){var bz;return by.s.MoveNext()?(by.c=by.s.Current(),true):(bz=by.s,!bm.Equals(bz,null)?bz.Dispose():void 0,by.s=null,bx[0]&&(bx[0]=false,by.s=E.Get(bw),by.s.MoveNext()?(by.c=by.s.Current(),true):(by.s.Dispose(),by.s=null,false)));},function(by){var bz;bz=by.s;!bm.Equals(bz,null)?bz.Dispose():void 0;});}};};I.average=function(bv){var bw,bx;bw=I.fold(function(by,bz){return(function(bA){var bB,bC;bB=bA[0];bC=bA[1];return function(bD){return[bB+1,bC+bD];};}(by))(bz);},[0,0],bv);bx=bw[0];return bx===0?w.InvalidArg("source","The input sequence was empty."):bw[1]/bx;};I.averageBy=function(bv,bw){var bx,by;bx=I.fold(function(bz,bA){return(function(bB){var bC,bD;bC=bB[0];bD=bB[1];return function(bE){return[bC+1,bD+bv(bE)];};}(bz))(bA);},[0,0],bw);by=bx[0];return by===0?w.InvalidArg("source","The input sequence was empty."):bx[1]/by;};I.cache=function(bv){var bw,bx;bw=[];bx=[E.Get(bv)];return{GetEnumerator:function(){return new F.New(0,null,function(by){var bz;return by.s<bw.length?(by.c=bw[by.s],by.s=by.s+1,true):(bz=bx[0],bm.Equals(bz,null)?false:bz.MoveNext()?(by.s=by.s+1,by.c=bz.Current(),bw.push(by.c),true):(bz.Dispose(),bx[0]=null,false));},void 0);}};};I.choose=function(bv,bw){return I.collect(function(bx){var by;by=bv(bx);return by==null?$.Empty:J.ofArray([by.$0]);},bw);};I.collect=function(bv,bw){return I.concat(I.map(bv,bw));};I.compareWith=function(bv,bw,bx){var by,bz,bA,bB,bC;by=E.Get(bw);try{bA=E.Get(bx);try{bB=0;bC=true;while(bC&&bB===0)if(by.MoveNext())bB=bA.MoveNext()?bv(by.Current(),bA.Current()):1;else if(bA.MoveNext())bB=-1;else bC=false;bz=bB;}finally{if("Dispose"in bA)bA.Dispose();}return bz;}finally{if("Dispose"in by)by.Dispose();}};I.concat=function(bv){return{GetEnumerator:function(){var bw;bw=E.Get(bv);return new F.New(null,null,function(bx){var by;while(true){by=bx.s;if(bm.Equals(by,null)){if(bw.MoveNext()){bx.s=E.Get(bw.Current());bx=bx;}else{bw.Dispose();return false;}}else if(by.MoveNext()){bx.c=by.Current();return true;}else{bx.Dispose();bx.s=null;bx=bx;}}},function(bx){var by;by=bx.s;!bm.Equals(by,null)?by.Dispose():void 0;!bm.Equals(bw,null)?bw.Dispose():void 0;});}};};I.countBy=function(bv,bw){return I.delay(function(){return H.countBy(bv,H.ofSeq(bw));});};I.delay=function(bv){return{GetEnumerator:function(){return E.Get(bv());}};};I.distinct=function(bv){return I.distinctBy(a.id,bv);};I.distinctBy=function(bv,bw){return{GetEnumerator:function(){var bx,by;bx=E.Get(bw);by=new _7.New$3();return new F.New(null,null,function(bz){var bA,bB;if(bx.MoveNext()){bA=bx.Current();bB=by.Add(bv(bA));while(!bB&&bx.MoveNext()){bA=bx.Current();bB=by.Add(bv(bA));}return bB&&(bz.c=bA,true);}else return false;},function(){bx.Dispose();});}};};I.splitInto=function(bv,bw){bv<=0?w.FailWith("Count must be positive"):void 0;return I.delay(function(){return H.splitInto(bv,H.ofSeq(bw));});};I.exactlyOne=function(bv){var bw,bx;bw=E.Get(bv);try{return bw.MoveNext()?(bx=bw.Current(),bw.MoveNext()?w.InvalidOp("Sequence contains more than one element"):bx):w.InvalidOp("Sequence contains no elements");}finally{if("Dispose"in bw)bw.Dispose();}};I.exists=function(bv,bw){var bx,by;bx=E.Get(bw);try{by=false;while(!by&&bx.MoveNext())by=bv(bx.Current());return by;}finally{if("Dispose"in bx)bx.Dispose();}};I.exists2=function(bv,bw,bx){var by,bz,bA,bB;by=E.Get(bw);try{bA=E.Get(bx);try{bB=false;while(!bB&&by.MoveNext()&&bA.MoveNext())bB=bv(by.Current(),bA.Current());bz=bB;}finally{if("Dispose"in bA)bA.Dispose();}return bz;}finally{if("Dispose"in by)by.Dispose();}};I.filter=function(bv,bw){return{GetEnumerator:function(){var bx;bx=E.Get(bw);return new F.New(null,null,function(by){var bz,bA,bB;bz=bx.MoveNext();bA=bx.Current();bB=false;while(bz)if(bv(bA)){by.c=bA;bB=true;bz=false;}else if(bx.MoveNext())bA=bx.Current();else bz=false;return bB;},function(){bx.Dispose();});}};};I.find=function(bv,bw){var bx;bx=I.tryFind(bv,bw);return bx==null?w.FailWith("KeyNotFoundException"):bx.$0;};I.findIndex=function(bv,bw){var bx;bx=I.tryFindIndex(bv,bw);return bx==null?w.FailWith("KeyNotFoundException"):bx.$0;};I.fold=function(bv,bw,bx){var by,bz;by=bw;bz=E.Get(bx);try{while(bz.MoveNext())by=bv(by,bz.Current());return by;}finally{if("Dispose"in bz)bz.Dispose();}};I.forall=function(bv,bw){return!I.exists(function(bx){return!bv(bx);},bw);};I.forall2=function(bv,bw,bx){return!I.exists2(function(by,bz){return!bv(by,bz);},bw,bx);};I.groupBy=function(bv,bw){return I.delay(function(){return H.groupBy(bv,H.ofSeq(bw));});};I.head=function(bv){var bw;bw=E.Get(bv);try{return bw.MoveNext()?bw.Current():I.insufficient();}finally{if("Dispose"in bw)bw.Dispose();}};I.init=function(bv,bw){return I.take(bv,I.initInfinite(bw));};I.initInfinite=function(bv){return{GetEnumerator:function(){return new F.New(0,null,function(bw){bw.c=bv(bw.s);bw.s=bw.s+1;return true;},void 0);}};};I.isEmpty=function(bv){var bw;bw=E.Get(bv);try{return!bw.MoveNext();}finally{if("Dispose"in bw)bw.Dispose();}};I.iter=function(bv,bw){var bx;bx=E.Get(bw);try{while(bx.MoveNext())bv(bx.Current());}finally{if("Dispose"in bx)bx.Dispose();}};I.iter2=function(bv,bw,bx){var by,bz,bA;by=E.Get(bw);try{bA=E.Get(bx);try{while(by.MoveNext()&&bA.MoveNext())bv(by.Current(),bA.Current());bz=void 0;}finally{if("Dispose"in bA)bA.Dispose();}bz;}finally{if("Dispose"in by)by.Dispose();}};I.iteri=function(bv,bw){var bx,by;bx=0;by=E.Get(bw);try{while(by.MoveNext()){bv(bx,by.Current());bx=bx+1;}}finally{if("Dispose"in by)by.Dispose();}};I.length=function(bv){var bw,bx;bw=0;bx=E.Get(bv);try{while(bx.MoveNext())bw=bw+1;return bw;}finally{if("Dispose"in bx)bx.Dispose();}};I.map=function(bv,bw){return{GetEnumerator:function(){var bx;bx=E.Get(bw);return new F.New(null,null,function(by){return bx.MoveNext()&&(by.c=bv(bx.Current()),true);},function(){bx.Dispose();});}};};I.mapi=function(bv,bw){return I.map2(bv,I.initInfinite(a.id),bw);};I.map2=function(bv,bw,bx){return{GetEnumerator:function(){var by,bz;by=E.Get(bw);bz=E.Get(bx);return new F.New(null,null,function(bA){return by.MoveNext()&&bz.MoveNext()&&(bA.c=bv(by.Current(),bz.Current()),true);},function(){by.Dispose();bz.Dispose();});}};};I.maxBy=function(bv,bw){return I.reduce(function(bx,by){return bm.Compare(bv(bx),bv(by))>=0?bx:by;},bw);};I.minBy=function(bv,bw){return I.reduce(function(bx,by){return bm.Compare(bv(bx),bv(by))<=0?bx:by;},bw);};I.max=function(bv){return I.reduce(function(bw,bx){return bm.Compare(bw,bx)>=0?bw:bx;},bv);};I.min=function(bv){return I.reduce(function(bw,bx){return bm.Compare(bw,bx)<=0?bw:bx;},bv);};I.nth=function(bv,bw){var bx,by;if(bv<0)w.FailWith("negative index requested");bx=-1;by=E.Get(bw);try{while(bx<bv){!by.MoveNext()?I.insufficient():void 0;bx=bx+1;}return by.Current();}finally{if("Dispose"in by)by.Dispose();}};I.pairwise=function(bv){return I.map(function(bw){return[H.get(bw,0),H.get(bw,1)];},I.windowed(2,bv));};I.pick=function(bv,bw){var bx;bx=I.tryPick(bv,bw);return bx==null?w.FailWith("KeyNotFoundException"):bx.$0;};I.readOnly=function(bv){return{GetEnumerator:function(){return E.Get(bv);}};};I.reduce=function(bv,bw){var bx,by;bx=E.Get(bw);try{if(!bx.MoveNext())w.FailWith("The input sequence was empty");by=bx.Current();while(bx.MoveNext())by=bv(by,bx.Current());return by;}finally{if("Dispose"in bx)bx.Dispose();}};I.scan=function(bv,bw,bx){return{GetEnumerator:function(){var by;by=E.Get(bx);return new F.New(false,null,function(bz){return bz.s?by.MoveNext()&&(bz.c=bv(bz.c,by.Current()),true):(bz.c=bw,bz.s=true,true);},function(){by.Dispose();});}};};I.skip=function(bv,bw){return{GetEnumerator:function(){var bx;bx=E.Get(bw);return new F.New(true,null,function(by){var bz,bA;if(by.s){for(bz=1,bA=bv;bz<=bA;bz++)if(!bx.MoveNext())I.insufficient();by.s=false;}else null;return bx.MoveNext()&&(by.c=bx.Current(),true);},function(){bx.Dispose();});}};};I.skipWhile=function(bv,bw){return{GetEnumerator:function(){var bx;bx=E.Get(bw);return new F.New(true,null,function(by){var bz,bA;if(by.s){bz=true;bA=false;while(bz)if(bx.MoveNext()){if(!bv(bx.Current()))bz=false;}else{bz=false;bA=true;}by.s=false;return bA?false:(by.c=bx.Current(),true);}else return bx.MoveNext()&&(by.c=bx.Current(),true);},function(){bx.Dispose();});}};};I.sort=function(bv){return I.sortBy(a.id,bv);};I.sortBy=function(bv,bw){return I.delay(function(){var bx;bx=H.ofSeq(bw);H.sortInPlaceBy(bv,bx);return bx;});};I.sortByDescending=function(bv,bw){return I.delay(function(){var bx;bx=H.ofSeq(bw);H.sortInPlaceByDescending(bv,bx);return bx;});};I.sortDescending=function(bv){return I.sortByDescending(a.id,bv);};I.sum=function(bv){return I.fold(function(bw,bx){return bw+bx;},0,bv);};I.sumBy=function(bv,bw){return I.fold(function(bx,by){return bx+bv(by);},0,bw);};I.take=function(bv,bw){bv<0?I.nonNegative():void 0;return{GetEnumerator:function(){var bx;bx=[E.Get(bw)];return new F.New(0,null,function(by){var bz;by.s=by.s+1;return by.s>bv?false:(bz=bx[0],bm.Equals(bz,null)?I.insufficient():bz.MoveNext()?(by.c=bz.Current(),by.s===bv?(bz.Dispose(),bx[0]=null):void 0,true):(bz.Dispose(),bx[0]=null,I.insufficient()));},function(){var by;by=bx[0];!bm.Equals(by,null)?by.Dispose():void 0;});}};};I.takeWhile=function(bv,bw){return I.delay(function(){return I.enumUsing(E.Get(bw),function(bx){return I.enumWhile(function(){return bx.MoveNext()&&bv(bx.Current());},I.delay(function(){return[bx.Current()];}));});});};I.truncate=function(bv,bw){return I.delay(function(){return I.enumUsing(E.Get(bw),function(bx){var by;by=[0];return I.enumWhile(function(){return bx.MoveNext()&&by[0]<bv;},I.delay(function(){by[0]++;return[bx.Current()];}));});});};I.tryFind=function(bv,bw){var bx,by,bz;bx=E.Get(bw);try{by=null;while(by==null&&bx.MoveNext()){bz=bx.Current();bv(bz)?by={$:1,$0:bz}:void 0;}return by;}finally{if("Dispose"in bx)bx.Dispose();}};I.findBack=function(bv,bw){var bx;bx=H.tryFindBack(bv,H.ofSeq(bw));return bx==null?w.FailWith("KeyNotFoundException"):bx.$0;};I.tryFindIndex=function(bv,bw){var bx,by,bz;bx=E.Get(bw);try{by=true;bz=0;while(by&&bx.MoveNext())if(bv(bx.Current()))by=false;else bz=bz+1;return by?null:{$:1,$0:bz};}finally{if("Dispose"in bx)bx.Dispose();}};I.findIndexBack=function(bv,bw){var bx;bx=H.tryFindIndexBack(bv,H.ofSeq(bw));return bx==null?w.FailWith("KeyNotFoundException"):bx.$0;};I.tryPick=function(bv,bw){var bx,by;bx=E.Get(bw);try{by=null;while(bm.Equals(by,null)&&bx.MoveNext())by=bv(bx.Current());return by;}finally{if("Dispose"in bx)bx.Dispose();}};I.unfold=function(bv,bw){return{GetEnumerator:function(){return new F.New(bw,null,function(bx){var by;by=bv(bx.s);return by==null?false:(bx.c=by.$0[0],bx.s=by.$0[1],true);},void 0);}};};I.windowed=function(bv,bw){bv<=0?w.FailWith("The input must be positive."):void 0;return I.delay(function(){return I.enumUsing(E.Get(bw),function(bx){var by;by=[];return I.append(I.enumWhile(function(){return by.length<bv&&bx.MoveNext();},I.delay(function(){by.push(bx.Current());return[];})),I.delay(function(){return by.length===bv?I.append([by.slice(0)],I.delay(function(){return I.enumWhile(function(){return bx.MoveNext();},I.delay(function(){by.shift();by.push(bx.Current());return[by.slice(0)];}));})):[];}));});});};I.zip=function(bv,bw){return I.map2(function(bx,by){return[bx,by];},bv,bw);};I.map3=function(bv,bw,bx,by){return{GetEnumerator:function(){var bz,bA,bB;bz=E.Get(bw);bA=E.Get(bx);bB=E.Get(by);return new F.New(null,null,function(bC){return bz.MoveNext()&&bA.MoveNext()&&bB.MoveNext()&&(bC.c=bv(bz.Current(),bA.Current(),bB.Current()),true);},function(){bz.Dispose();bA.Dispose();bB.Dispose();});}};};I.zip3=function(bv,bw,bx){return I.map3(function(by,bz,bA){return[by,bz,bA];},bv,bw,bx);};I.fold2=function(bv,bw,bx,by){return H.fold2(bv,bw,H.ofSeq(bx),H.ofSeq(by));};I.foldBack=function(bv,bw,bx){return H.foldBack(bv,H.ofSeq(bw),bx);};I.foldBack2=function(bv,bw,bx,by){return H.foldBack2(bv,H.ofSeq(bw),H.ofSeq(bx),by);};I.iteri2=function(bv,bw,bx){var by,bz,bA,bB;by=0;bz=E.Get(bw);try{bB=E.Get(bx);try{while(bz.MoveNext()&&bB.MoveNext()){bv(by,bz.Current(),bB.Current());by=by+1;}bA=void 0;}finally{if("Dispose"in bB)bB.Dispose();}bA;}finally{if("Dispose"in bz)bz.Dispose();}};I.mapi2=function(bv,bw,bx){return I.map3(function(by,bz,bA){return((bv(by))(bz))(bA);},I.initInfinite(a.id),bw,bx);};I.mapFold=function(bv,bw,bx){return H.mapFold(bv,bw,H.ofSeq(bx));};I.mapFoldBack=function(bv,bw,bx){return H.mapFoldBack(bv,H.ofSeq(bw),bx);};I.permute=function(bv,bw){return I.delay(function(){return H.permute(bv,H.ofSeq(bw));});};I.reduceBack=function(bv,bw){return H.reduceBack(bv,H.ofSeq(bw));};I.replicate=function(bv,bw){bv<0?I.nonNegative():void 0;return I.delay(function(){return I.map(function(){return bw;},w.range(0,bv-1));});};I.rev=function(bv){return I.delay(function(){return H.ofSeq(bv).slice().reverse();});};I.scanBack=function(bv,bw,bx){return I.delay(function(){return H.scanBack(bv,H.ofSeq(bw),bx);});};I.indexed=function(bv){return I.mapi(function(bw,bx){return[bw,bx];},bv);};I.sortWith=function(bv,bw){return I.delay(function(){var bx;bx=H.ofSeq(bw);H.sortInPlaceWith(bv,bx);return bx;});};I.tail=function(bv){return I.skip(1,bv);};bh.CopyTo=function(bv,bw,bx){H.blit(bw,0,bw,bx,H.length(bv));};bh.Contains=function(bv,bw){return I.exists(function(bx){return bm.Equals(bw,bx);},bv);};bh.Clear=function(bv){bv.splice(0,H.length(bv));};bi.RegexEscape=function(bv){return bv.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bi.SplitWith=function(bv,bw){return bv.split(bw);};bi.Join=function(bv,bw){return bw.join(bv);};bi.TrimEndWS=function(bv){return bv.replace(new a.RegExp("\\s+$"),"");};bi.TrimStartWS=function(bv){return bv.replace(new a.RegExp("^\\s+"),"");};bi.Trim=function(bv){return bv.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};bi.StartsWith=function(bv,bw){return bv.substring(0,bw.length)==bw;};bi.Substring=function(bv,bw,bx){return bv.substr(bw,bx);};bi.ReplaceOnce=function(bv,bw,bx){return bv.replace(bw,bx);};bi.Remove=function(bv,bw,bx){return bv.substring(0,bw)+bv.substring(bw+bx);};bi.PadRightWith=function(bv,bw,bx){return bw>bv.length?bv+a.Array(bw-bv.length+1).join(bx):bv;};bi.PadLeftWith=function(bv,bw,bx){return bw>bv.length?a.Array(bw-bv.length+1).join(bx)+bv:bv;};bi.LastIndexOf=function(bv,bw,bx){return bv.lastIndexOf(bw,bx);};bi.IsNullOrWhiteSpace=function(bv){return bv==null||(new a.RegExp("^\\s*$")).test(bv);};bi.IsNullOrEmpty=function(bv){return bv==null||bv=="";};bi.Insert=function(bv,bw,bx){return bv.substring(0,bw-1)+bx+bv.substring(bw);};bi.IndexOf=function(bv,bw,bx){return bv.indexOf(bw,bx);};bi.EndsWith=function(bv,bw){return bv.substring(bv.length-bw.length)==bw;};bi.collect=function(bv,bw){return H.init(bw.length,function(bx){return bv(bw[bx]);}).join("");};bi.concat=function(bv,bw){return H.ofSeq(bw).join(bv);};bi.exists=function(bv,bw){return I.exists(bv,bi.protect(bw));};bi.forall=function(bv,bw){return I.forall(bv,bi.protect(bw));};bi.init=function(bv,bw){return H.init(bv,bw).join("");};bi.iter=function(bv,bw){I.iter(bv,bi.protect(bw));};bi.iteri=function(bv,bw){I.iteri(bv,bi.protect(bw));};bi.length=function(bv){return bi.protect(bv).length;};bi.map=function(bv,bw){return bi.collect(bv,bi.protect(bw));};bi.mapi=function(bv,bw){return H.ofSeq(I.mapi(bv,bw)).join("");};bi.replicate=function(bv,bw){return bi.init(bv,function(){return bw;});};bi.protect=function(bv){return bv===null?"":bv;};bi.SFormat=function(bv,bw){return bv.replace(new a.RegExp("{(0|[1-9]\\d*)(?:,(-?[1-9]\\d*|0))?(?::(.*?))?}","g"),function(bx,by,bz){var bA,bB,bC;bA=br(H.get(bw,+by));return!bm.Equals(bz,void 0)?(bB=+bz,(bC=bu.abs(bB),bC>bA.length?bB>0?bi.PadLeft(bA,bC):bi.PadRight(bA,bC):bA)):bA;});};bi.Filter=function(bv,bw){return H.ofSeq(I.choose(function(bx){return bv(bx)?{$:1,$0:bx}:null;},bw)).join("");};bi.SplitStrings=function(bv,bw,bx){return bi.Split(bv,new a.RegExp(bi.concat("|",H.map(bi.RegexEscape,bw))),bx);};bi.SplitChars=function(bv,bw,bx){return bi.Split(bv,new a.RegExp("["+bi.RegexEscape(bw.join(""))+"]"),bx);};bi.Split=function(bv,bw,bx){return bx===1?H.filter(function(by){return by!=="";},bi.SplitWith(bv,bw)):bi.SplitWith(bv,bw);};bi.TrimEnd=function(bv,bw){var bx,by;if(bm.Equals(bw,null)||bw.length==0)return bi.TrimEndWS(bv);else{bx=bv.length-1;by=true;while(bx>=0&&by)(function(){var bz;bz=bv[bx];return H.exists(function(bA){return bz===bA;},bw)?void(bx=bx-1):void(by=false);}());return bi.Substring(bv,0,bx+1);}};bi.TrimStart=function(bv,bw){var bx,by;if(bm.Equals(bw,null)||bw.length==0)return bi.TrimStartWS(bv);else{bx=0;by=true;while(bx<bv.length&&by)(function(){var bz;bz=bv[bx];return H.exists(function(bA){return bz===bA;},bw)?void(bx=bx+1):void(by=false);}());return bv.substring(bx);}};bi.ToCharArrayRange=function(bv,bw,bx){return H.init(bx,function(by){return bv[bw+by];});};bi.ToCharArray=function(bv){return H.init(bv.length,function(bw){return bv[bw];});};bi.ReplaceChar=function(bv,bw,bx){return bi.Replace(bv,bw,bx);};bi.Replace=function(bv,bw,bx){function by(bz){var bA,bB,bC;bA=bz.indexOf(bw);return bA!==-1?(bB=bi.ReplaceOnce(bz,bw,bx),(bC=bA+bx.length,bi.Substring(bB,0,bA+bx.length)+by(bB.substring(bC)))):bz;}return by(bv);};bi.PadRight=function(bv,bw){return bi.PadRightWith(bv,bw," ");};bi.PadLeft=function(bv,bw){return bi.PadLeftWith(bv,bw," ");};bi.CopyTo=function(bv,bw,bx,by,bz){H.blit(bi.ToCharArray(bv),bw,bx,by,bz);};bi.Compare=function(bv,bw){return bm.Compare(bv,bw);};bj=b.Task=bp.Class({Execute:function(){this.action();},Start:function(){var bv;bv=this;bm.Equals(this.status,0)?(this.status=2,z.scheduler().Fork(function(){var bw;bv.status=3;try{bv.Execute();bv.status=5;}catch(bx){bx instanceof X&&(bm.Equals(bx.ct,bv.token)&&(bw=bx,true))?(bt.log("Task cancellation caught:",bw),bv.exc=new _1.New$3([bw]),bv.status=6):(bt.log("Task error caught:",bx),bv.exc=new _1.New$3([bx]),bv.status=7);}bv.RunContinuations();})):w.InvalidOp("Task not in initial state");},StartContinuation:function(){var bv;bv=this;bm.Equals(this.status,1)?(this.status=2,z.scheduler().Fork(function(){if(bm.Equals(bv.status,2)){bv.status=3;try{bv.Execute();bv.status=5;}catch(bw){bv.exc=new _1.New$3([bw]);bv.status=7;}bv.RunContinuations();}})):void 0;},ContinueWith:function(bv,bw){var bx,by;bx=this;by=new bk.New(function(){return bv(bx);},bw,1,null,void 0);this.get_IsCompleted()?by.StartContinuation():this.continuations.push(by);return by;},ContinueWith$1:function(bv,bw){var bx,by;bx=this;by=new bj.New$2(function(){return bv(bx);},bw,1,null);this.get_IsCompleted()?by.StartContinuation():this.continuations.push(by);return by;},ContinueWith$2:function(bv){return this.ContinueWith$1(bv,z.noneCT());},RunContinuations:function(){var bv,bw,bx;bv=this.continuations;for(bw=0,bx=bv.length-1;bw<=bx;bw++)H.get(bv,bw).StartContinuation();},OnCompleted:function(bv){if(this.get_IsCompleted())bv();else{bm.Equals(this.get_Status(),0)?this.Start():void 0;this.ContinueWith$2(function(){return bv();});}},get_Status:function(){return this.status;},get_IsFaulted:function(){return bm.Equals(this.status,7);},get_IsCompleted:function(){return bm.Equals(this.status,5)||bm.Equals(this.status,7)||bm.Equals(this.status,6);},get_IsCanceled:function(){return bm.Equals(this.status,6);},get_Exception:function(){return this.exc;}},e,bj);bj.WhenAll=function(bv){var bw,bx,by,bz,bA,bB;bw=H.length(bv);bx=[0];by=new a.Array(bw);bz=new bl.New();for(bA=0,bB=bw-1;bA<=bB;bA++)(function(bC){H.get(bv,bA).ContinueWith$2(function(bD){return bD.get_IsFaulted()?void bz.TrySetException$1(bD.get_Exception()):bD.get_IsCanceled()?void bz.TrySetCanceled$1():(bx[0]++,by[bC]=bD.get_Result(),bx[0]===bw?bz.SetResult(by):null);});}(bA));return bz.get_Task();};bj.WhenAll$1=function(bv){var bw,bx,by,bz,bA;bw=H.length(bv);bx=[0];by=new bl.New();for(bz=0,bA=bw-1;bz<=bA;bz++)H.get(bv,bz).ContinueWith$2(function(bB){return bB.get_IsFaulted()?void by.TrySetException$1(bB.get_Exception()):bB.get_IsCanceled()?void by.TrySetCanceled$1():(bx[0]++,bx[0]===bw?void by.TrySetResult():null);});return by.get_Task();};bj.WhenAny=function(bv){var bw,bx,by;bw=new bl.New();for(bx=0,by=bv.length-1;bx<=by;bx++)H.get(bv,bx).ContinueWith(function(bz){bw.TrySetResult(bz);},z.noneCT());return bw.get_Task();};bj.WhenAny$1=function(bv){var bw,bx,by;bw=new bl.New();for(bx=0,by=bv.length-1;bx<=by;bx++)H.get(bv,bx).ContinueWith$2(function(bz){bw.TrySetResult(bz);});return bw.get_Task();};bj.Delay=function(bv,bw){return z.StartAsTask(z.Sleep(bv),{$:1,$0:bw});};bj.Delay$1=function(bv){return z.StartAsTask(z.Sleep(bv),null);};bj.Run=function(bv,bw){var bx;bx=bv();return bw.c?bj.FromCanceled(bw):(bm.Equals(bx.get_Status(),0)?bx.Start():void 0,bx);};bj.Run$1=function(bv,bw){var bx;bx=new bk.New(bv,bw,0,null,void 0);bx.Start();return bx;};bj.Run$2=function(bv,bw){var bx;bx=bv();return bw.c?bj.FromCanceled$1(bw):(bm.Equals(bx.get_Status(),0)?bx.Start():void 0,bx);};bj.Run$3=function(bv,bw){var bx;bx=new bj.New$2(bv,bw,0,null);bx.Start();return bx;};bj.FromResult=function(bv){return new bk.New(null,z.noneCT(),5,null,bv);};bj.FromException=function(bv){return new bk.New(null,z.noneCT(),7,new _1.New$3([bv]),null);};bj.FromException$1=function(bv){return new bj.New$2(null,z.noneCT(),7,new _1.New$3([bv]));};bj.FromCanceled=function(bv){return new bk.New(null,bv,6,null,null);};bj.FromCanceled$1=function(bv){return new bj.New$2(null,bv,6,null);};bj.New=bp.Ctor(function(bv,bw){bj.New$2.call(this,bv,bw,0,null);},bj);bj.New$1=bp.Ctor(function(bv){bj.New$2.call(this,bv,z.noneCT(),0,null);},bj);bj.New$2=bp.Ctor(function(bv,bw,bx,by){this.action=bv;this.token=bw;this.status=bx;this.continuations=[];this.exc=by;},bj);bk=b.Task1=bp.Class({get_Result:function(){return this.result;},Execute:function(){this.result=this.func();}},bj,bk);bk.New=bp.Ctor(function(bv,bw,bx,by,bz){bj.New$2.call(this,null,bw,bx,by);this.func=bv;this.result=bz;},bk);bl=b.TaskCompletionSource=bp.Class({TrySetResult:function(bv){return!this.task.get_IsCompleted()&&(this.task.status=5,this.task.result=bv,this.task.RunContinuations(),true);},TrySetException:function(bv){return this.TrySetException$1(new _1.New$2(bv));},TrySetException$1:function(bv){return!this.task.get_IsCompleted()&&(this.task.status=7,this.task.exc=new _1.New$3([bv]),this.task.RunContinuations(),true);},TrySetCanceled:function(bv){return!this.task.get_IsCompleted()&&(this.task.status=6,this.task.RunContinuations(),true);},TrySetCanceled$1:function(){return!this.task.get_IsCompleted()&&(this.task.status=6,this.task.RunContinuations(),true);},SetResult:function(bv){this.task.get_IsCompleted()?w.FailWith("Task already completed."):void 0;this.task.status=5;this.task.result=bv;this.task.RunContinuations();},SetException:function(bv){this.SetException$1(new _1.New$2(bv));},SetException$1:function(bv){this.task.get_IsCompleted()?w.FailWith("Task already completed."):void 0;this.task.status=7;this.task.exc=new _1.New$3([bv]);this.task.RunContinuations();},SetCanceled:function(){this.task.get_IsCompleted()?w.FailWith("Task already completed."):void 0;this.task.status=6;this.task.RunContinuations();},get_Task:function(){return this.task;}},e,bl);bl.New=bp.Ctor(function(){this.task=new bk.New(null,z.noneCT(),1,null,void 0);},bl);bm.Hash=function(bv){var bw;bw=typeof bv;return bw=="function"?0:bw=="boolean"?bv?1:0:bw=="number"?bv:bw=="string"?bm.hashString(bv):bw=="object"?bv==null?0:bv instanceof a.Array?bm.hashArray(bv):bm.hashObject(bv):0;};bm.hashObject=function(bv){var bw,bx;if("GetHashCode"in bv)return bv.GetHashCode();else{bw=[0];for(var by in bv)if(function(bz){bw[0]=bm.hashMix(bm.hashMix(bw[0],bm.hashString(bz)),bm.Hash(bv[bz]));return false;}(by))break;return bw[0];}};bm.hashString=function(bv){var bw,bx,by;if(bv===null)return 0;else{bw=5381;for(bx=0,by=bv.length-1;bx<=by;bx++)bw=bm.hashMix(bw,bv[bx].charCodeAt());return bw;}};bm.hashArray=function(bv){var bw,bx,by;bw=-34948909;for(bx=0,by=H.length(bv)-1;bx<=by;bx++)bw=bm.hashMix(bw,bm.Hash(H.get(bv,bx)));return bw;};bm.hashMix=function(bv,bw){return(bv<<5)+bv+bw;};bm.Equals=function(bv,bw){var bx,by,bz,bA;if(bv===bw)return true;else{bx=typeof bv;if(bx=="object"){if(bv===null||bv===void 0||bw===null||bw===void 0)return false;else if("Equals"in bv)return bv.Equals(bw);else if(bv instanceof a.Array&&bw instanceof a.Array)return bm.arrayEquals(bv,bw);else if(bv instanceof bs&&bw instanceof bs)return bm.dateEquals(bv,bw);else{by=[true];for(var bB in bv)if(function(bC){by[0]=!bv.hasOwnProperty(bC)||bw.hasOwnProperty(bC)&&bm.Equals(bv[bC],bw[bC]);return!by[0];}(bB))break;if(by[0]){for(var bC in bw)if(function(bD){by[0]=!bw.hasOwnProperty(bD)||bv.hasOwnProperty(bD);return!by[0];}(bC))break;}return by[0];}}else return bx=="function"&&("$Func"in bv?bv.$Func===bw.$Func&&bv.$Target===bw.$Target:"$Invokes"in bv&&"$Invokes"in bw&&bm.arrayEquals(bv.$Invokes,bw.$Invokes));}};bm.dateEquals=function(bv,bw){return bv.getTime()===bw.getTime();};bm.arrayEquals=function(bv,bw){var bx,by;if(H.length(bv)===H.length(bw)){bx=true;by=0;while(bx&&by<H.length(bv)){!bm.Equals(H.get(bv,by),H.get(bw,by))?bx=false:void 0;by=by+1;}return bx;}else return false;};bm.Compare=function(bv,bw){var bx,by,bz,bA,bB,bC;if(bv===bw)return 0;else{by=typeof bv;switch(by=="function"?1:by=="boolean"?2:by=="number"?2:by=="string"?2:by=="object"?3:0){case 0:return typeof bw=="undefined"?0:-1;break;case 1:return w.FailWith("Cannot compare function values.");break;case 2:return bv<bw?-1:1;break;case 3:if(bv===null)bz=-1;else if(bw===null)bz=1;else if("CompareTo"in bv)bz=bv.CompareTo(bw);else if("CompareTo0"in bv)bz=bv.CompareTo0(bw);else if(bv instanceof a.Array&&bw instanceof a.Array)bz=bm.compareArrays(bv,bw);else if(bv instanceof bs&&bw instanceof bs)bz=bm.compareDates(bv,bw);else{bA=[0];for(var bD in bv)if(function(bE){return!bv.hasOwnProperty(bE)?false:!bw.hasOwnProperty(bE)?(bA[0]=1,true):(bA[0]=bm.Compare(bv[bE],bw[bE]),bA[0]!==0);}(bD))break;if(bA[0]===0){for(var bE in bw)if(function(bF){return!bw.hasOwnProperty(bF)?false:!bv.hasOwnProperty(bF)&&(bA[0]=-1,true);}(bE))break;}bz=bA[0];}return bz;break;}}};bm.compareDates=function(bv,bw){return bm.Compare(bv.getTime(),bw.getTime());};bm.compareArrays=function(bv,bw){var bx,by;if(H.length(bv)<H.length(bw))return -1;else if(H.length(bv)>H.length(bw))return 1;else{bx=0;by=0;while(bx===0&&by<H.length(bv)){bx=bm.Compare(H.get(bv,by),H.get(bw,by));by=by+1;}return bx;}};bn.TryParse=function(bv,bw,bx,by){var bz,bA;bz=+bv;bA=bz===bz-bz%1&&bz>=bw&&bz<=bx;bA?by.set(bz):void 0;return bA;};bn.Parse=function(bv,bw,bx,by){var bz;bz=+bv;if(bz!==bz-bz%1)throw new _3.New$1("Input string was not in a correct format.");else if(bz<bw||bz>bx)throw new _4.New$1(by);else return bz;};bn.ParseByte=function(bv){return bn.Parse(bv,0,255,"Value was either too large or too small for an unsigned byte.");};bn.TryParseByte=function(bv,bw){return bn.TryParse(bv,0,255,bw);};bn.ParseSByte=function(bv){return bn.Parse(bv,-128,127,"Value was either too large or too small for a signed byte.");};bn.TryParseSByte=function(bv,bw){return bn.TryParse(bv,-128,127,bw);};bn.ParseInt16=function(bv){return bn.Parse(bv,-32768,32767,"Value was either too large or too small for an Int16.");};bn.TryParseInt16=function(bv,bw){return bn.TryParse(bv,-32768,32767,bw);};bn.ParseInt32=function(bv){return bn.Parse(bv,-2147483648,2147483647,"Value was either too large or too small for an Int32.");};bn.TryParseInt32=function(bv,bw){return bn.TryParse(bv,-2147483648,2147483647,bw);};bn.ParseUInt16=function(bv){return bn.Parse(bv,0,65535,"Value was either too large or too small for an UInt16.");};bn.TryParseUInt16=function(bv,bw){return bn.TryParse(bv,0,65535,bw);};bn.ParseUInt32=function(bv){return bn.Parse(bv,0,4294967295,"Value was either too large or too small for an UInt32.");};bn.TryParseUInt32=function(bv,bw){return bn.TryParse(bv,0,4294967295,bw);};bn.ParseInt64=function(bv){return bn.Parse(bv,-9223372036854775808,9223372036854775807,"Value was either too large or too small for an Int64.");};bn.TryParseInt64=function(bv,bw){return bn.TryParse(bv,-9223372036854775808,9223372036854775807,bw);};bn.ParseUInt64=function(bv){return bn.Parse(bv,0,18446744073709551615,"Value was either too large or too small for an UInt64.");};bn.TryParseUInt64=function(bv,bw){return bn.TryParse(bv,0,18446744073709551615,bw);};}());
